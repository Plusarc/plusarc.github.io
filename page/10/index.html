<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="google88d81a02a91db82f" />










  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="Plusaber&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Plusaber's Blog">
<meta property="og:url" content="http://yoursite.com/page/10/index.html">
<meta property="og:site_name" content="Plusaber's Blog">
<meta property="og:description" content="Plusaber&apos;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Plusaber's Blog">
<meta name="twitter:description" content="Plusaber&apos;s Blog">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/10/"/>


  <title> Plusaber's Blog </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-hk">

  


<!-- hexo-inject:begin --><!-- hexo-inject:end --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-79158075-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Plusaber's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分類
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            標籤
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/08/Research_DBpedia Spotlight Introduction and Manual/" itemprop="url">
                  DBpedia Spotlight
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-10-08T00:00:00+09:00" content="2015-10-08">
              2015-10-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/research/" itemprop="url" rel="index">
                    <span itemprop="name">research</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/08/Research_DBpedia Spotlight Introduction and Manual/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/08/Research_DBpedia Spotlight Introduction and Manual/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="DBpedia-Spotlight"><a href="#DBpedia-Spotlight" class="headerlink" title="DBpedia Spotlight"></a>DBpedia Spotlight</h1><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>DBpedia Spotlight is a tool for automatically annotating mentions of DBpedia resources in text, providing a solution for linking unstructured information sources to the Linked Open Data cloud through DBpedia. DBpedia Spotlight recognizes that names of concepts or entities have been mentioned (e.g. “Michael Jordan”), and subsequently matches these names to unique identifiers (e.g. dbpedia:Michael_I._Jordan, the machine learning professor or dbpedia:Michael_Jordan the basketball player). It can also be used for building your solution for Named Entity Recognition, Keyphrase Extraction, Tagging, etc. amongst other information extraction tasks.</p>
<p>Text annotation has the potential of enhancing a wide range of applications, including search, faceted browsing and navigation. By connecting text documents with DBpedia, our system enables a range of interesting use cases. For instance, the ontology can be used as background knowledge to display complementary information on web pages or to enhance information retrieval tasks. Moreover, faceted browsing over documents and customization of web feeds based on semantics become feasible. Finally, by following links from DBpedia into other data sources, the Linked Open Data cloud is pulled closer to the Web of Documents.</p>
<p>Take a look at our Known Uses page for other examples of how DBpedia Spotlight can be used. If you use DBpedia Spotlight in your project, please add a link to <a href="http://spotlight.dbpedia.org" target="_blank" rel="external">http://spotlight.dbpedia.org</a>. If you use it in a paper, please use the citation available here.</p>
<p>You can try out DBpedia Spotlight through our Web Application or Web Service endpoints. The Web Application is a user interface that allows you to enter text in a form and generates an HTML annotated version of the text with links to DBpedia. The Web Service endpoints provide programmatic access to the demo, allowing you to retrieve data also in XML or JSON.</p>
<p><a href="http://dbpedia-spotlight.github.io/demo/" target="_blank" rel="external">Demo web application</a>.</p>
<h2 id="Glossary"><a href="#Glossary" class="headerlink" title="Glossary"></a>Glossary</h2><ul>
<li><p><strong>Context</strong>: the context refers to the “the parts of something written or spoken that immediately precede and follow a word or passage and clarify its meaning.” </p>
</li>
<li><p><strong>OntologyClass</strong>: an ontology class represents a set of resources sharing similar characteristics. Resources can be of several types: Person, Organisation, Location, FloweringPlant, etc. All of these classes are organized in a domain model (i.e. schema, ontology). The “type” or the “ontology class” of a resource comes from this ontology.</p>
</li>
<li><p><strong>Phrase Recognition</strong>: See Spotting.</p>
</li>
<li><p><strong>Resource</strong>: a resource is any entity or concept in our target knowledge base (e.g. DBpedia). We take this name from RDF (Resource Description Framework), as a generic name for things, concepts, ideas “that can be identified on the Web, even when they cannot be directly retrieved on the Web.”</p>
</li>
<li><p><strong>Spotting</strong>: We call Spotting or Phrase Recognition the task of selecting, from some textual document given as input, phrases that should be annotated by the system. This is closely related to Keyphrase Extraction and Named Entity Recognition, for instance. In Keyphrase Extraction, the system tries to guess the “important” phrases, according to some definition of importance. Meanwhile, in Named Entity Recognition, the system focuses on specific entity types (commonly Person, Location and Organization), and the notion of importance is usually irrelevant. We describe some of these and several other strategies for phrase recognition below.</p>
</li>
<li><p><strong>SurfaceForm</strong>: a surface form is the phrase used to refer to a resource in text. For example: “Barack Obama”, “President Obama” and “Obama” are all surface forms for the resource <code>dbpedia:Obama</code>.</p>
</li>
<li><p><strong>Token</strong>: each individual element extracted after tokenizing the text more. Tokens are the individual words in the context, or slightly modified versions of these words (e.g. running -&gt; run)</p>
</li>
<li><p><strong>Topic</strong>: a topic is a broad categorization of knowledge into areas of interest. For example, text can belong to Business, Politics, Sports or Arts topics.</p>
</li>
</ul>
<h2 id="User’s-manual"><a href="#User’s-manual" class="headerlink" title="User’s manual"></a>User’s manual</h2><p><strong>DBpedia Spotlight</strong> is a tool for annotating mentions of DBpedia concepts in plain text.</p>
<p>We offer three basic functions: Annotate, Disambiguate and Candidates (Best K). They can be accessed from a Scala/Java API, REST Web Service and from a user interface on the Web (HTML/Javascript). For the Scala/Java API, there are a number of configuration parameters that can be used to instruct the annotation and disambiguation functions. The classes DefaultAnnotator, DefaultDisambiguator and DefaultParagraphDisambiguator offer the configuration that we found to provide the best results. The configuration interface offers ways to control the quality of the output of the two above tasks.</p>
<h3 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h3><p>The DBpedia Spotlight Architecture is composed by the following modules:</p>
<ul>
<li><strong>Web application</strong>, a demonstration client (HTML/Javascript interface) that allows users to enter/paste text into a Web browser and visualize the resulting annotated text.</li>
<li><strong>Web Service</strong>, a RESTful/SOAP? Web API that exposes the functionality of annotating and/or disambiguating entities in text.</li>
<li><strong>Annotation Java/Scala API</strong>, exposing the underlying logic that performs the annotation/disambiguation.</li>
<li><strong>Indexing Java/Scala API</strong>, executing the data processing necessary to enable the annotation/disambiguation algorithms used.</li>
<li><strong>Evaluation module</strong>, where we test disambiguators, log results and use those to train our system to perform better.</li>
</ul>
<p><strong>External dependencies</strong>:</p>
<ul>
<li>DBpedia Extraction Framework, (only for the index module) extracting the necessary data from the Wikipedia dumps.</li>
<li>Lucene 2.9.3, providing the low level indexing framework used by DBpedia Spotlight.</li>
<li>LingPipe 4.0.0, providing the string matching implementation used for the Spotter module.</li>
</ul>
<h3 id="System-Requirements"><a href="#System-Requirements" class="headerlink" title="System Requirements"></a>System Requirements</h3><ul>
<li>Java 1.6+</li>
<li>Scala 2.9+</li>
<li>Spotlight JAR</li>
<li>Spotlight Library JARs</li>
<li>Lucene disambiguation index</li>
<li>Spotter dictionary</li>
<li>large RAM to set the heap size big enough for the Spotter (approx. 8G)</li>
<li>Maven 3 for the automagic installation of dependencies.</li>
<li><strong>Indexing Java/Scala API</strong>, executing the data processing necessary to enable the annotation/disambiguation algorithms used.</li>
</ul>
<h3 id="Programmatic-usage"><a href="#Programmatic-usage" class="headerlink" title="Programmatic usage"></a>Programmatic usage</h3><p>If you want to use DBpedia Spotlight in your Java/Scala code, take a look at core/SpotlightFactory to see how you can create your objects, and then look at rest/Candidates.java to see how you can wire them together.</p>
<h3 id="Online-Usage"><a href="#Online-Usage" class="headerlink" title="Online Usage"></a>Online Usage</h3><p>Refer to <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/User&#39;s-manual" target="_blank" rel="external">User’s manual</a>。</p>
<h4 id="Content-Negotiation"><a href="#Content-Negotiation" class="headerlink" title="Content Negotiation"></a>Content Negotiation</h4><p>You can request different types of output by setting the Accept request header. For example, in order to request JSON output, you can add Accept:application/json to the request headers.</p>
<p>One example using cURL:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">curl &quot;http://spotlight.dbpedia.org/rest/annotate?text=President%20Michelle%20Obama%20called%20Thursday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20&quot;\</div><div class="line"> -H &quot;Accept:application/json&quot;</div></pre></td></tr></table></figure>
<p>The content types we currently support are:</p>
<ul>
<li>text/html</li>
<li>application/xhtml+xml</li>
<li>text/xml</li>
<li>application/json</li>
</ul>
<p>The <code>application/xhtml+xml</code> comes with embedded RDFa that you can give to the RDFa Distiller and get RDF triples in Turtle, RDF+XML, etc. as output.</p>
<p>If your input text is long, you may prefer using POST instead of GET.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">curl -i -X POST \</div><div class="line">    -H &quot;Accept:application/json&quot; \</div><div class="line">    -H &quot;content-type:application/x-www-form-urlencoded&quot; \</div><div class="line">    -d &quot;disambiguator=Document&amp;confidence=-1&amp;support=-1&amp;text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package&quot; \</div><div class="line">       http://spotlight.dbpedia.org/rest/annotate/</div></pre></td></tr></table></figure>
<p>Please note that you must use content-type application/x-www-form-urlencoded for POST requests.</p>
<p>The following are 4 examples, each consists of a query url and the result.</p>
<h5 id="Example-1-without-type-restriction"><a href="#Example-1-without-type-restriction" class="headerlink" title="Example 1: without type restriction"></a>Example 1: without type restriction</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://spotlight.dbpedia.org/rest/annotate?text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20</div></pre></td></tr></table></figure>
<p>returns the XML</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;Annotation text=&quot;President Obama called Wednesday on Congress to extend a tax break</div><div class="line">for students included in last year&apos;s economic stimulus package, arguing that the policy</div><div class="line">provides more generous assistance.&quot;</div><div class="line">confidence=&quot;0.2&quot; support=&quot;20&quot;&gt;</div><div class="line">  &lt;Resources&gt;</div><div class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Barack_Obama&quot;</div><div class="line">      support=&quot;5761&quot; types=&quot;Person,Politician,President&quot; surfaceForm=&quot;President Obama&quot; offset=&quot;0&quot;</div><div class="line">      similarityScore=&quot;0.31504717469215393&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</div><div class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/United_States_Congress&quot;</div><div class="line">      support=&quot;8569&quot; types=&quot;Organisation,Legislature&quot; surfaceForm=&quot;Congress&quot; offset=&quot;36&quot; </div><div class="line">      similarityScore=&quot;0.2348192036151886&quot; percentageOfSecondRank=&quot;0.8635579006818564&quot;/&gt;</div><div class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Tax_break&quot;</div><div class="line">      support=&quot;32&quot; types=&quot;&quot; surfaceForm=&quot;tax break&quot; offset=&quot;57&quot;</div><div class="line">      similarityScore=&quot;0.35041093826293945&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</div><div class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Student&quot;</div><div class="line">      support=&quot;1701&quot; types=&quot;&quot; surfaceForm=&quot;students&quot; offset=&quot;71&quot;</div><div class="line">      similarityScore=&quot;0.32534149289131165&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</div><div class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Policy&quot;</div><div class="line">      support=&quot;557&quot; types=&quot;&quot; surfaceForm=&quot;policy&quot; offset=&quot;148&quot;</div><div class="line">      similarityScore=&quot;0.3228176236152649&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</div><div class="line">  &lt;/Resources&gt;</div><div class="line">&lt;/Annotation&gt;</div></pre></td></tr></table></figure>
<h5 id="Example-2-with-type-restriction"><a href="#Example-2-with-type-restriction" class="headerlink" title="Example 2: with type restriction"></a>Example 2: with type restriction</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://spotlight.dbpedia.org/rest/annotate?text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20&amp;types=Person,Organisation</div></pre></td></tr></table></figure>
<p>returns the XML</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;Annotation text=&quot;President Obama called Wednesday on Congress to extend a tax break</div><div class="line">for students included in last year&apos;s economic stimulus package, arguing that the policy</div><div class="line">provides more generous assistance.&quot;</div><div class="line">confidence=&quot;0.2&quot; support=&quot;20&quot; types=&quot;Person,Organisation&quot;&gt;</div><div class="line">  &lt;Resources&gt;</div><div class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Barack_Obama&quot;</div><div class="line">      support=&quot;5761&quot; types=&quot;Person,Politician,President&quot; surfaceForm=&quot;President Obama&quot; offset=&quot;0&quot; </div><div class="line">      similarityScore=&quot;0.31504717469215393&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</div><div class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/United_States_Congress&quot;</div><div class="line">      support=&quot;8569&quot; types=&quot;Organisation,Legislature&quot; surfaceForm=&quot;Congress&quot; offset=&quot;36&quot; </div><div class="line">      similarityScore=&quot;0.2348192036151886&quot; percentageOfSecondRank=&quot;0.8635579006818564&quot;/&gt;</div><div class="line">  &lt;/Resources&gt;</div><div class="line">&lt;/Annotation&gt;</div></pre></td></tr></table></figure>
<h5 id="Example-3-with-SPARQL-restriction"><a href="#Example-3-with-SPARQL-restriction" class="headerlink" title="Example 3: with SPARQL restriction"></a>Example 3: with SPARQL restriction</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://spotlight.dbpedia.org/rest/annotate?text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20&amp;sparql=SELECT+DISTINCT+%3Fx%0D%0AWHERE+%7B%0D%0A%3Fx+a+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FOfficeHolder%3E+.%0D%0A%3Fx+%3Frelated+%3Chttp%3A%2F%2Fdbpedia.org%2Fresource%2FChicago%3E+.%0D%0A%7D</div></pre></td></tr></table></figure>
<p>returns the XML</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;Annotation text=&quot;President Obama called Wednesday on Congress to extend a tax break</div><div class="line">for students included in last year&apos;s economic stimulus package, arguing that the policy</div><div class="line">provides more generous assistance.&quot;</div><div class="line">confidence=&quot;0.2&quot; support=&quot;20&quot; </div><div class="line">sparql=&quot;SELECT DISTINCT ?x WHERE &#123; ?x a &lt;http://dbpedia.org/ontology/OfficeHolder&gt;; . </div><div class="line">?x ?related &lt;http://dbpedia.org/resource/Chicago&gt;;  &#125;&quot; </div><div class="line">policy=&quot;whitelist&quot;&gt; </div><div class="line">  &lt;Resources&gt; </div><div class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Barack_Obama&quot; </div><div class="line">      support=&quot;5761&quot; types=&quot;Person,Politician,President&quot; surfaceForm=&quot;President Obama&quot; offset=&quot;0&quot; </div><div class="line">      similarityScore=&quot;0.2730408310890198&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt; </div><div class="line">  &lt;/Resources&gt; </div><div class="line">&lt;/Annotation&gt;</div></pre></td></tr></table></figure>
<h5 id="Example-4-Candidates-Interface"><a href="#Example-4-Candidates-Interface" class="headerlink" title="Example 4: Candidates Interface"></a>Example 4: Candidates Interface</h5><p>The parameters are the same as in Example 1, but you will send your request to <a href="http://spotlight.dbpedia.org/rest/candidates" target="_blank" rel="external">http://spotlight.dbpedia.org/rest/candidates</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://spotlight.dbpedia.org/rest/candidates?text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20</div></pre></td></tr></table></figure>
<p>returns XML</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;annotation text=&quot;President Obama on Monday will call for a new minimum tax rate for individuals making more than $1 million a year to ensure that they pay at least the same percentage of their earnings as other taxpayers, according to administration officials. &quot;&gt;</div><div class="line">&lt;surfaceForm name=&quot;individuals&quot; offset=&quot;67&quot;&gt;</div><div class="line">  &lt;resource label=&quot;Individual&quot; uri=&quot;Individual&quot; contextualScore=&quot;0.26683980226516724&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;312&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.26683980226516724&quot;/&gt;</div><div class="line">  &lt;resource label=&quot;The Individuals (New Jersey band)&quot; uri=&quot;The_Individuals_%28New_Jersey_band%29&quot; contextualScore=&quot;0.011762913316488266&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;17&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.011762913316488266&quot;/&gt;</div><div class="line">  &lt;resource label=&quot;The Individuals (Chicago band)&quot; uri=&quot;The_Individuals_%28Chicago_band%29&quot; contextualScore=&quot;0.0&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;0&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.0&quot;/&gt;</div><div class="line">&lt;/surfaceForm&gt;</div><div class="line">&lt;surfaceForm name=&quot;officials&quot; offset=&quot;233&quot;&gt;</div><div class="line">  &lt;resource label=&quot;Official&quot; uri=&quot;Official&quot; contextualScore=&quot;0.1324356347322464&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;196&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.1324356347322464&quot;/&gt;</div><div class="line">  &lt;resource label=&quot;Rugby league match officials&quot; uri=&quot;Rugby_league_match_officials&quot; contextualScore=&quot;0.04376954212784767&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;9&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.04376954212784767&quot;/&gt;</div><div class="line">&lt;/surfaceForm&gt;</div><div class="line">&lt;surfaceForm name=&quot;President Obama&quot; offset=&quot;0&quot;&gt;</div><div class="line">  &lt;resource label=&quot;Presidency of Barack Obama&quot; uri=&quot;Presidency_of_Barack_Obama&quot; contextualScore=&quot;0.5634340643882751&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;134&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.5634340643882751&quot;/&gt;</div><div class="line">&lt;/surfaceForm&gt;</div><div class="line">&lt;surfaceForm name=&quot;1 million&quot; offset=&quot;97&quot;&gt;</div><div class="line">  &lt;resource label=&quot;Million&quot; uri=&quot;Million&quot; contextualScore=&quot;0.527919590473175&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;492&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.527919590473175&quot;/&gt;</div><div class="line">&lt;/surfaceForm&gt;</div><div class="line">&lt;surfaceForm name=&quot;percentage&quot; offset=&quot;156&quot;&gt;</div><div class="line">  &lt;resource label=&quot;Percentage&quot; uri=&quot;Percentage&quot; contextualScore=&quot;0.6362485885620117&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;165&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.6362485885620117&quot;/&gt;</div><div class="line">&lt;/surfaceForm&gt;</div><div class="line">&lt;surfaceForm name=&quot;earnings&quot; offset=&quot;176&quot;&gt;</div><div class="line">  &lt;resource label=&quot;Income&quot; uri=&quot;Income&quot; contextualScore=&quot;0.5776156187057495&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;648&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.5776156187057495&quot;/&gt;</div><div class="line">&lt;/surfaceForm&gt;</div><div class="line">&lt;surfaceForm name=&quot;taxpayers&quot; offset=&quot;194&quot;&gt;</div><div class="line">  &lt;resource label=&quot;Tax&quot; uri=&quot;Tax&quot; contextualScore=&quot;0.7484055757522583&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;1540&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.7484055757522583&quot;/&gt;</div><div class="line">  &lt;resource label=&quot;TaxPayers&amp;apos; Alliance&quot; uri=&quot;TaxPayers%27_Alliance&quot; contextualScore=&quot;0.12765906751155853&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;15&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.12765906751155853&quot;/&gt;</div><div class="line">  &lt;resource label=&quot;The Taxpayer (Luxembourg)&quot; uri=&quot;The_Taxpayer_%28Luxembourg%29&quot; contextualScore=&quot;0.024930020794272423&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;3&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.024930020794272423&quot;/&gt;</div><div class="line">  &lt;resource label=&quot;The Taxpayers&quot; uri=&quot;The_Taxpayers&quot; contextualScore=&quot;0.0&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;0&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.0&quot;/&gt;</div><div class="line">&lt;/surfaceForm&gt;</div><div class="line">&lt;/annotation&gt;</div></pre></td></tr></table></figure>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a><a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Installation" target="_blank" rel="external">Installation</a></h2><p>Refer to <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Installation" target="_blank" rel="external">Installation</a>.</p>
<h3 id="Web-service"><a href="#Web-service" class="headerlink" title="Web service"></a><a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Web-service" target="_blank" rel="external">Web service</a></h3><p>This page gives an introduction on how to use the DBpedia Spotlight Web Service. The available service endpoints are listed below and described in more details in the User’s Manual.</p>
<h4 id="Spotting"><a href="#Spotting" class="headerlink" title="Spotting"></a>Spotting</h4><p>Spotting : takes text as input and recognizes entities/concepts to annotate. Several spotting techniques are available, such as dictionary lookup and Named Entity Recognition (NER).</p>
<h4 id="Disambiguate"><a href="#Disambiguate" class="headerlink" title="Disambiguate"></a>Disambiguate</h4><p>Disambiguation: takes spotted text input, where entities/concepts have already been recognized and marked as wiki markup or xml. Chooses an identifier for each recognized entity/concept given the context.</p>
<p>Supported types (POST/GET):XML, JSON, HTML, RDFa, NIF</p>
<h4 id="Annotate"><a href="#Annotate" class="headerlink" title="Annotate"></a>Annotate</h4><p>Annotation: runs spotting and disambiguation. Takes text as input, recognizes entities/concepts to annotate and chooses an identifier for each recognized entity/concept given the context.</p>
<p>Supported types (POST/GET):XML, JSON, HTML, RDFa, NIF</p>
<h4 id="Candidates"><a href="#Candidates" class="headerlink" title="Candidates"></a>Candidates</h4><p>Similar to annotate, but returns a ranked list of candidates instead of deciding on one. These list contains some properties as described below:</p>
<ul>
<li>support: how prominent is this entity, i.e. number of inlinks in Wikipedia;</li>
<li>priorScore: normalized support;<br>contextualScore: score from comparing the context representation of an <em> </em> entity with the text (e.g. cosine similartity with if-icf weights);</li>
<li>percentageOfSecondRank: measure by how much the winning entity has won by takingcontextualScore_2ndRank / contextualScore_1stRank, which means the lower this score, the further the first ranked entity was “in the lead”;</li>
<li>finalScore: combination of all of them;<br>Supported types (POST/GET):XML, JSON</li>
</ul>
<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><h5 id="Example-1-Simple-request"><a href="#Example-1-Simple-request" class="headerlink" title="Example 1: Simple request"></a>Example 1: Simple request</h5><ul>
<li>text= “President Obama called Wednesday on Congress to extend a tax break for students included in last year’s economic stimulus package, arguing that the policy provides more generous assistance.”</li>
<li>confidence = 0.2; support=20</li>
<li>whitelist all types.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">curl http://spotlight.dbpedia.org/rest/annotate \</div><div class="line">  --data-urlencode &quot;text=President Obama called Wednesday on Congress to extend a tax break</div><div class="line">  for students included in last year&apos;s economic stimulus package, arguing</div><div class="line">  that the policy provides more generous assistance.&quot; \</div><div class="line">  --data &quot;confidence=0.2&quot; \</div><div class="line">  --data &quot;support=20&quot;</div></pre></td></tr></table></figure>
<h4 id="Example-2-Using-SPARQL-for-filtering"><a href="#Example-2-Using-SPARQL-for-filtering" class="headerlink" title="Example 2: Using SPARQL for filtering"></a>Example 2: Using SPARQL for filtering</h4><p>This example demonstrates how to keep the annotations constrained to only politicians related to Chicago.</p>
<ul>
<li>text= “President Obama called Wednesday on Congress to extend a tax break for students included in last year’s economic stimulus package, arguing that the policy provides more generous assistance.”</li>
<li>confidence = 0.2; support=20<br>whitelist sparql = SELECT DISTINCT ?politician WHERE { ?politician a <a href="http://dbpedia.org/ontology/officeholder" target="_blank" rel="external">http://dbpedia.org/ontology/officeholder</a><a href="/http://dbpedia.org/ontology/officeholder">/http://dbpedia.org/ontology/officeholder</a> . ?politician ?related <a href="http://dbpedia.org/resource/chicago" target="_blank" rel="external">http://dbpedia.org/resource/chicago</a><a href="/http://dbpedia.org/resource/chicago">/http://dbpedia.org/resource/chicago</a> }</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">curl http&amp;amp;&amp;#35;58&amp;#59;//spotlight.dbpedia.org/rest/annotate \</div><div class="line">  &amp;amp;&amp;#35;45&amp;#59;&amp;amp;&amp;#35;45&amp;#59;data&amp;amp;&amp;#35;45&amp;#59;urlencode &amp;amp;quot&amp;#59;text&amp;amp;&amp;#35;61&amp;#59;President Obama called Wednesday on Congress to extend a tax break</div><div class="line">  for students included in last year&amp;amp;&amp;#35;39&amp;#59;s economic stimulus package, arguing</div><div class="line">  that the policy provides more generous assistance.&amp;amp;quot&amp;#59; \</div><div class="line">  &amp;amp;&amp;#35;45&amp;#59;&amp;amp;&amp;#35;45&amp;#59;data &amp;amp;quot&amp;#59;confidence&amp;amp;&amp;#35;61&amp;#59;0.2&amp;amp;quot&amp;#59; \</div><div class="line">  &amp;amp;&amp;#35;45&amp;#59;&amp;amp;&amp;#35;45&amp;#59;data &amp;amp;quot&amp;#59;support&amp;amp;&amp;#35;61&amp;#59;20&amp;amp;quot&amp;#59; \</div><div class="line"> &amp;amp;&amp;#35;45&amp;#59;&amp;amp;&amp;#35;45&amp;#59;data&amp;amp;&amp;#35;45&amp;#59;urlencode &amp;amp;quot&amp;#59;sparql&amp;amp;&amp;#35;61&amp;#59;SELECT DISTINCT ?x WHERE &amp;amp;&amp;#35;123&amp;#59; ?x a &amp;amp;lt&amp;#59;http&amp;amp;&amp;#35;58&amp;#59;//dbpedia.org/ontology/OfficeHolder&amp;amp;gt&amp;#59; . ?x ?related &amp;amp;lt&amp;#59;http&amp;amp;&amp;#35;58&amp;#59;//dbpedia.org/resource/Chicago&amp;amp;gt&amp;#59; . &amp;amp;&amp;#35;125&amp;#59;&amp;amp;quot&amp;#59;</div></pre></td></tr></table></figure>
<p><strong>Notice</strong>: Due to system resources restrictions, for this demo we only use the first 2000 results returned for each query (default for the public DBpedia SPARQL endpoint). However you are welcome to download the software+data and install in your server for real world use cases.</p>
<p><strong>Attention</strong>: Make sure to encode your SPARQL query before adding it as the value of the //&amp;sparql// parameter - see <a href="http://download.oracle.com/javase/6/docs/api/java/net/URLEncoder.html" target="_blank" rel="external">java.net.URLEncoder.encode()</a>.</p>
<h4 id="Content-Negotiation-1"><a href="#Content-Negotiation-1" class="headerlink" title="Content Negotiation"></a>Content Negotiation</h4><p>You can request different types of output by setting the Accept request header. For example, in order to request JSON output, you can add Accept:application/json to the request headers.</p>
<p>One example using cURL:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl &quot;http://spotlight.dbpedia.org/rest/annotate?text=President%20Michelle%20Obama%20called%20Thursday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20&quot; -H &quot;Accept:application/json&quot;</div></pre></td></tr></table></figure>
<p>The content types we currently support are:</p>
<ul>
<li>text/html</li>
<li>application/xhtml+xml</li>
<li>text/xml</li>
<li>application/json</li>
</ul>
<p>The application/xhtml+xml comes with embedded RDFa that you can give to the RDFa Distiller and get RDF triples in Turtle, RDF+XML, etc. as output.<br>If your input text is long, you may prefer using POST instead of GET.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">curl -i -X POST \</div><div class="line">   -H &quot;Accept:application/json&quot; \</div><div class="line">   -H &quot;content-type:application/x-www-form-urlencoded&quot; \</div><div class="line">   -d &quot;disambiguator=Document&amp;confidence=-1&amp;support=-1&amp;text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package&quot; \</div><div class="line">   http://spotlight.dbpedia.org/dev/rest/annotate/</div></pre></td></tr></table></figure>
<p>Please not that you must use content-type application/x-www-form-urlencoded for POST requests.</p>
<h3 id="Run-from-a-JAR"><a href="#Run-from-a-JAR" class="headerlink" title="Run from a JAR"></a>Run from a JAR</h3><p>This page describes how to run DBpedia Spotlight in your own server by using a pre-packaged JAR. We assume that you are running these commands on a bash command line (Linux) and have wget, curl and java installed.</p>
<p>Requirements</p>
<ul>
<li>Java 1.6+</li>
<li>RAM of appropriate size for the spotter lexicon you need</li>
</ul>
<h4 id="Quickstart"><a href="#Quickstart" class="headerlink" title="Quickstart"></a>Quickstart</h4><p>The commands below will help you to obtain a pre-packaged lightweight deployment to get you started.</p>
<h5 id="Lucene"><a href="#Lucene" class="headerlink" title="Lucene:"></a>Lucene:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">wget http://spotlight.dbpedia.org/download/release-0.6/dbpedia-spotlight-quickstart-0.6.5.zip</div><div class="line">unzip dbpedia-spotlight-quickstart-0.6.5.zip</div><div class="line">cd dbpedia-spotlight-quickstart-0.6.5/</div><div class="line">./run.sh</div></pre></td></tr></table></figure>
<p>Older jars are downloadable from: <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/downloads" target="_blank" rel="external">https://github.com/dbpedia-spotlight/dbpedia-spotlight/downloads</a></p>
<h5 id="Statistical"><a href="#Statistical" class="headerlink" title="Statistical:"></a>Statistical:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">wget http://spotlight.sztaki.hu/downloads/version-0.1/en.tar.gz</div><div class="line">wget http://spotlight.sztaki.hu/downloads/version-0.1/dbpedia-spotlight.jar</div><div class="line">tar xvf en.tar.gz </div><div class="line">java -jar dbpedia-spotlight.jar /data/spotlight/en/model_en http://localhost:2222/rest</div></pre></td></tr></table></figure>
<h4 id="Test-your-installation"><a href="#Test-your-installation" class="headerlink" title="Test your installation"></a>Test your installation</h4><p>In order to test your new installation, run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">curl http://localhost:2222/rest/annotate \</div><div class="line">  -H &quot;Accept: text/xml&quot; \</div><div class="line">  --data-urlencode &quot;text=Brazilian state-run giant oil company Petrobras signed a three-year technology and research cooperation agreement with oil service provider Halliburton.&quot; \</div><div class="line">  --data &quot;confidence=0&quot; \</div><div class="line">  --data &quot;support=0&quot;</div></pre></td></tr></table></figure>
<p>Now you can study more about how to call your newly installed <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Web-service" target="_blank" rel="external">Web Service</a>, which parameters are accepted, etc. here.</p>
<h4 id="Upgrade-your-models"><a href="#Upgrade-your-models" class="headerlink" title="Upgrade your models"></a>Upgrade your models</h4><h5 id="Lucene-1"><a href="#Lucene-1" class="headerlink" title="Lucene:"></a>Lucene:</h5><p>The files you’ve downloaded above contain only a very small subset of the DBpedia resources. They are used to demonstrate DBpedia Spotlight in a lightweight environment. Please see our <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Downloads" target="_blank" rel="external">Downloads</a> for more information on other alternatives that are more useful in real world scenarios. See below one example.</p>
<p>First rename your small model files:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mv data/index data/index-small</div><div class="line">mv data/spotter.dict data/spotter-small.dict</div></pre></td></tr></table></figure>
<p>Now obtain new copies with larger models:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">cd data</div><div class="line">wget http://spotlight.dbpedia.org/download/release-0.5/context-index-compact.tgz</div><div class="line">tar zxvf context-index-compact.tgz</div><div class="line">mv index-withSF-withTypes-compressed index</div><div class="line">wget http://spotlight.dbpedia.org/download/release-0.4/surface_forms-Wikipedia-TitRedDis.uriThresh75.tsv.spotterDictionary.gz</div><div class="line">gunzip surface_forms-Wikipedia-TitRedDis.uriThresh75.tsv.spotterDictionary.gz</div><div class="line">mv surface_forms-Wikipedia-TitRedDis.uriThresh75.tsv.spotterDictionary spotter.dict</div></pre></td></tr></table></figure>
<p>If you are using the largest spotter dict, you may need to increase the java heap space – e.g. -Xmx10G in your command line.</p>
<h5 id="Statistical-1"><a href="#Statistical-1" class="headerlink" title="Statistical:"></a>Statistical:</h5><p>We offer only the complete model with this option. You can download the newest models from <a href="http://spotlight.sztaki.hu/downloads/" target="_blank" rel="external">http://spotlight.sztaki.hu/downloads/</a></p>
<h2 id="Two-Backend-version"><a href="#Two-Backend-version" class="headerlink" title="Two Backend version"></a>Two Backend version</h2><h3 id="Statistical-backend"><a href="#Statistical-backend" class="headerlink" title="Statistical backend"></a>Statistical backend</h3><p>Refer to <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Statistical-implementation" target="_blank" rel="external">Statistical backend</a>.</p>
<h3 id="Lucene-backend"><a href="#Lucene-backend" class="headerlink" title="Lucene backend"></a>Lucene backend</h3><p>Refer to <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/IR-based-implementation-(Lucene" target="_blank" rel="external">Lucene backend</a>).</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/08/Research_StanfordNLP/" itemprop="url">
                  Stanford CoreNLP
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-10-08T00:00:00+09:00" content="2015-10-08">
              2015-10-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/research/" itemprop="url" rel="index">
                    <span itemprop="name">research</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/08/Research_StanfordNLP/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/08/Research_StanfordNLP/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Stanford-CoreNLP"><a href="#Stanford-CoreNLP" class="headerlink" title="Stanford CoreNLP"></a>Stanford CoreNLP</h1><p><a href="http://nlp.stanford.edu/software/corenlp.shtml" target="_blank" rel="external">Stanford CoreNLP</a><br><a href="http://nlp.stanford.edu/software/" target="_blank" rel="external">The Stanford Natural Language Processing Group</a><br><a href="http://nlp.stanford.edu/software/tagger.shtml" target="_blank" rel="external">Stanford Log-linear Part-Of-Speech Tagger</a><br><a href="http://nlp.stanford.edu/software/CRF-NER.shtml" target="_blank" rel="external">Stanford Named Entity Recognizer (NER)</a><br><a href="http://nlp.stanford.edu/software/lex-parser.shtml" target="_blank" rel="external">The Stanford Parser: A statistical parser</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/08/Research_检索&聚类评价/" itemprop="url">
                  检索&聚类评价
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-10-08T00:00:00+09:00" content="2015-10-08">
              2015-10-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/research/" itemprop="url" rel="index">
                    <span itemprop="name">research</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/08/Research_检索&聚类评价/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/08/Research_检索&聚类评价/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="检索Evaluation"><a href="#检索Evaluation" class="headerlink" title="检索Evaluation"></a>检索Evaluation</h1><h2 id="Evaluation-Criteria-of-Unranked-Retrieval"><a href="#Evaluation-Criteria-of-Unranked-Retrieval" class="headerlink" title="Evaluation Criteria of Unranked Retrieval"></a>Evaluation Criteria of Unranked Retrieval</h2><table>
<thead>
<tr>
<th>-</th>
<th>Retrieved</th>
<th>Not-retrieved</th>
</tr>
</thead>
<tbody>
<tr>
<td>relevante</td>
<td>TP(true positive)</td>
<td>FN(false negative)</td>
</tr>
<tr>
<td>Non-relevant</td>
<td>FP(false positive)</td>
<td>TN(true negative)</td>
</tr>
</tbody>
</table>
<h3 id="Precision-AND-Recall"><a href="#Precision-AND-Recall" class="headerlink" title="Precision AND Recall"></a><a href="https://en.wikipedia.org/wiki/Precision_and_recall" target="_blank" rel="external">Precision AND Recall</a></h3><p>$$<br>precision = \frac{TP}{TP+FP}<br>$$</p>
<p>$$<br>recall = \frac{TP}{TP+FN}<br>$$</p>
<h3 id="Precision-Recall-Curve"><a href="#Precision-Recall-Curve" class="headerlink" title="Precision-Recall Curve"></a>Precision-Recall Curve</h3><p>通常precision和recall是呈一种负相关的关系，recall越高，precision越低。precision-recall curve以recall为横坐标，以precision为纵坐标，表示precision-recall变化关系。</p>
<h3 id="F-Score"><a href="#F-Score" class="headerlink" title="F-Score"></a><a href="https://en.wikipedia.org/wiki/F1_score" target="_blank" rel="external">F-Score</a></h3><p>组合precision和recall的评价参数。</p>
<p>$$<br>F = \frac{1}{\alpha\frac 1P + (1-\alpha)\frac 1R} = \frac{(\beta^{2}+1)PR}{\beta^2P+R}<br>$$</p>
<p>通常我们取$\beta=1,2,3..=，1$，也就是$\alpha=0.5$，也就是harmonic mean，也写作$F_1$，当取$\beta=1,2,3..$，也就得到$F_1, F_2, F_3..$：</p>
<p>$$<br>F_1 = \frac{2}{\frac 1P + \frac 1R}=\frac{2PR}{R+P}<br>$$</p>
<h2 id="Precision-for-Rankded-retrieval"><a href="#Precision-for-Rankded-retrieval" class="headerlink" title="Precision for Rankded retrieval"></a>Precision for Rankded retrieval</h2><h3 id="P-k-AND-R-k"><a href="#P-k-AND-R-k" class="headerlink" title="P@k AND R@k"></a>P@k AND R@k</h3><p>用于表示在top k结果中的precision和Recall，如P@10，表示top 10结果的precision。</p>
<h3 id="MRR"><a href="#MRR" class="headerlink" title="MRR"></a>MRR</h3><p>也就是Mean reciprocal rank，reciprocal rank表示对于一个query第一个正确结果排名位置的倒数值，也就是$RR=\frac {1}{rank}$。MRR表示多个query的RR的平均值：</p>
<p>$$<br>MRR=\frac{1}{|Q|}\sum^{|Q|}_{i=1}\frac {1}{rank_i}<br>$$</p>
<p>维基百科给出了一个很好的例子：</p>
<table>
<thead>
<tr>
<th>query</th>
<th>results</th>
<th>correct response</th>
<th>rank</th>
<th>reciprocal rank</th>
</tr>
</thead>
<tbody>
<tr>
<td>cat</td>
<td>cattern,cati,cats</td>
<td>cats</td>
<td>3</td>
<td>1/3</td>
</tr>
<tr>
<td>torus</td>
<td>toril,tori,toruses</td>
<td>tori</td>
<td>2</td>
<td>1/2</td>
</tr>
<tr>
<td>virus</td>
<td>viruses,virii,viri</td>
<td>viruses</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>$MRR=\frac {(\frac 13 + \frac 12 + 1)}{3}=0.61$</p>
<h3 id="MAP"><a href="#MAP" class="headerlink" title="MAP"></a>MAP</h3><p>Mean average precision，上面的MRR适合只考虑第一个正确结果检索性能使用，如果有多个正确结果且都要考虑，则应该使用MAP。</p>
<p>假设query q有m个correct document(or query suggestion etc.).</p>
<p>$$<br>AP(q)=\frac 1m \sum^{i=m}_{i=1}P(RankSet_i)<br>$$</p>
<p>$RankSet_i$表示document i排序所在的位置及以上的位置所有的document。假设docuement i=3，排在第7的位置，则$RankSet_3$为1-7的documents，$P(RankSet_i)$即是这个set的precision。</p>
<p>MAP为多个query的AP的mean：</p>
<p>$$<br>MAP=\frac{1}{|Q|}\sum^{|Q|}_{i=1}{AP(i)}<br>$$</p>
<h3 id="DCG-and-nDCG"><a href="#DCG-and-nDCG" class="headerlink" title="DCG and nDCG"></a>DCG and nDCG</h3><p>DCG：Discounted cumulative gain<br>nDCG：Normalized Discounted cumulative gain</p>
<p>给每个文档指定一个得分，我们希望的得分越高的文档排在越前面。<br>假设一个排名是: $G=[5,2,3,0,10,3]$</p>
<p>cumulativfe gain可以计算如下：</p>
<p>$$<br>CG[k]=\sum^{k}_{i=1}G[i]<br>$$</p>
<p>加上一个惩罚系数，排名越后惩罚越多：</p>
<p>$$<br>DCG[k]=\sum^{k}_{i=1}\frac{G[i]}{log_2(1+i)}<br>$$</p>
<p>存在理想的排序$G^`=[10,5,3,3,2,0]$，使得DCG的得分最高。</p>
<p>使用这个最高得分normal实际的排序，得到就是nDCG得分。</p>
<p>$$<br>nDCG[k]=\frac{DCG[k]}{DCG^`[k]}<br>$$</p>
<h2 id="Other-Criteria-of-Effective-IR"><a href="#Other-Criteria-of-Effective-IR" class="headerlink" title="Other Criteria of Effective IR"></a>Other Criteria of Effective IR</h2><ul>
<li>diversity</li>
<li>credibility</li>
<li>comprehensibility</li>
</ul>
<h1 id="Clustering-Evaluaition"><a href="#Clustering-Evaluaition" class="headerlink" title="Clustering Evaluaition"></a>Clustering Evaluaition</h1><p>参考<a href="http://nlp.stanford.edu/IR-book/html/htmledition/evaluation-of-clustering-1.html" target="_blank" rel="external">Evaluation of clustering</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/06/Developing_Redis(2)/" itemprop="url">
                  Redis(2)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-10-06T00:00:00+09:00" content="2015-10-06">
              2015-10-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Developing/" itemprop="url" rel="index">
                    <span itemprop="name">Developing</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/06/Developing_Redis(2)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/06/Developing_Redis(2)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>redis中的事务（transaction）和传统关系型数据库中的事务一样，是一组命令的集合。事务同命令一样都是redis最小的执行单位，一个事务中的命令要么都执行，要么都不执行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">MULTI</div><div class="line"></div><div class="line">SADD <span class="string">"user:1:following"</span> 2</div><div class="line">SADO <span class="string">"user:2:following"</span> 1</div><div class="line"></div><div class="line">EXEC</div></pre></td></tr></table></figure>
<p>在执行到EXEC之前，前面的命令并不会马上执行，而是添加到等待执行的事务队列中。如果在EXEC之前事务中断，则事务的所有命令都不会被执行，一旦发送了EXEC命令，所有命令都一定会被执行。</p>
<p>另外redis事务还保证一个事务内的命令依次执行而不被其他命令插入，也就是在多个客户端的情况下，一旦某个客户端开始执行某个事务，到结束之前，其他客户端的命令都不会被执行。</p>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><ul>
<li><p>语法错误<br>事务所有命令都不会被执行。</p>
</li>
<li><p>运行错误。比如使用散列类型的命令操作集合类型的键。这种错误在事务中会被接受并继续执行，也就是即使某条命令出现允许错误，其后面的命令还是会被执行，整个事务会被完成。</p>
</li>
</ul>
<p><strong>需要注意的是，redis不支持rollback。</strong></p>
<h2 id="WATCH命令"><a href="#WATCH命令" class="headerlink" title="WATCH命令"></a>WATCH命令</h2><p>很多情况下我们需要保证在我们获得某个键值后，该键值不能被其他客户端修改，直到当前客户端执行事务完成，这时我们可以使用WATCH。WATCH命令可以监控一个或多个键，一旦其中有一个键被修改（或删除），之后的事务就不会被执行（与事务的最后一条性质相违背？没有！！）。监控一直持续到EXEC命令（监控可以在MULTI之前进行，从那时就开始监控，事务中的命令是在EXEC之后才执行的，所以在MULTI命令后可以修改WATCH监控，也就是WATCH作用是，从WATCH开始，到MULTI中间，如果被watch的键被修改，那么这个事务不会被执行）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">SET key 1</div><div class="line">WATCH key</div><div class="line">SET key 2</div><div class="line">MULTI</div><div class="line">SET key 3</div><div class="line">EXEC</div><div class="line"></div><div class="line">GET key <span class="comment"># 结果是2</span></div></pre></td></tr></table></figure>
<p>执行EXEC命令后会取消对所有键的监控，也可以 用UNWATCH命令来取消监控。</p>
<h2 id="生存时间"><a href="#生存时间" class="headerlink" title="生存时间"></a>生存时间</h2><p>在redis可以使用EXPIRE命令设置一个键的生存时间，到时间后redis会自动删除。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">EXPIRE key seconds <span class="comment"># 返回1表示设置成功，0表示失败</span></div><div class="line">EXPIRE session:29e3d 900</div><div class="line"></div><div class="line">TTL key <span class="comment"># 还有多少时间会被删除（秒），-1表示键不存在或没有设置时间</span></div><div class="line"></div><div class="line">PERSIST key<span class="comment"># 取消生存时间设置（恢复为永久保存）</span></div></pre></td></tr></table></figure>
<p>除了PRESIST外，使用SET或GETSET命令赋值也同时回清除键的生存时间（恢复为永久）。其他命令只对键值进行操作的命令（INCR,LPUSH,HSET,ZREM）都不会影响键的生存时间。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PEXPIRE key 1000 <span class="comment"># 毫秒位单位</span></div></pre></td></tr></table></figure>
<h2 id="实现缓存"><a href="#实现缓存" class="headerlink" title="实现缓存"></a>实现缓存</h2><p>为了提高性能和负载能力，我们通常需要将一些访问频率较高或者计算密集的数据结果缓存起来，并希望这些数据能根据具体访问情况自动更新或过期（性能和有效的内存利用）。由于内存有限，我们不可能无限的将所有数据缓存在内存中，需要按照一定的规则淘汰不需要的缓存键，通过配置文件的maxmemory参数我们可以设置redis最大可用内存大小，超出这个限制时redis回根据maxmemory-policy参数指定的策略删除一些键以空出空间。</p>
<table>
<thead>
<tr>
<th>rule</th>
<th>explaination</th>
</tr>
</thead>
<tbody>
<tr>
<td>volatile-lru</td>
<td>使用LRU算法删除一个键（只对设置了生存时间的键）</td>
</tr>
<tr>
<td>allkeys-lru</td>
<td>使用LRU算法删除一个键</td>
</tr>
<tr>
<td>volatile-random</td>
<td>随见删除一个键（只对设置了生存时间的键）</td>
</tr>
<tr>
<td>allkeys-lru</td>
<td>随机删除一个键</td>
</tr>
<tr>
<td>valatile-ttl</td>
<td>删除生存时间最近的一个键</td>
</tr>
<tr>
<td>noeviction</td>
<td>不删除键，返回错误</td>
</tr>
</tbody>
</table>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><ul>
<li>有序集合</li>
<li>SORT命令</li>
</ul>
<p>SORT可以对集合，列表和有序集合类型进行排序（在对有序集合排序时会忽略元素的分数，只针对元素自身的值进行排序，如数字是根据数字大小，还可以通过ALPHA参数实现按照字典顺序排列非数字元素），使用DESC可以实现将元素从大到小排序。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SORT tag:ruby:posts</div><div class="line">SORT myzset</div><div class="line"></div><div class="line">SORT mylistalpha ALPHA DESC</div></pre></td></tr></table></figure>
<p>另外SORT还支持LIMIT offset count的用法<br><code>SORT tag:ruby:posts DESC LIMIT 1 2</code></p>
<ul>
<li>BY参数</li>
</ul>
<p>很多时候列表，集合等中存储的元素值代表的是对象ID，单纯对这些ID排序意义不大，我们需要根据ID对于的对象的某个属性进行排序，这时我们可以使用BY参数。<code>BY 参考键</code>，其中参考键可以是字符串类型键或者是散列类型的某个字段<br>（表示为<code>键名-&gt;字段名</code>）。如果提供了BY参数，SORT命令不在根据元素自身的值进行排序，而是对每个元素使用元素的值替换参考键中的第一个<code>*</code>并获取其值，用以进行排序。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SORT tag:ruby:posts BY post:*-&gt;time DESC</div></pre></td></tr></table></figure>
<p>除散列类型外，参考键还可以是字符串类型：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SORT list my itemscore:* DESC</div></pre></td></tr></table></figure>
<p>当某个元素的参考键不存在时，会默认参考键值为0.</p>
<ul>
<li>GET参数</li>
</ul>
<p>GET参数不影响排序，它的作用是使SORT命令的返回结果不再是元素自身的值，而是GET参数中指定的键值。GET参数的规则和BY参数一样，也支持字符串类型和散列类型的键，并同样使用<code>*</code>作为占位符。另外在一个SORT 命令中可以有多个GET参数（而BY参数只能有一个）。</p>
<p><code>SORT tag:ruby:posts BY post:*-&gt;time DESC GET post:*title GET post:*-&gt;time GET #</code></p>
<p>有N个GET参数，每个元素返回的结果就有N行。使用#作为参数可以返回键值本身。</p>
<ul>
<li>STORE参数</li>
</ul>
<p>可以将排序结果使用STORE保存，返回结果为保存结果个数。</p>
<p><code>SORT tag:ruby:posts BY post:*-&gt;time DESC GET post:*title GET post:*-&gt;time GET # STORE stor.result</code></p>
<ul>
<li>性能优化</li>
</ul>
<h2 id="消息通知"><a href="#消息通知" class="headerlink" title="消息通知"></a>消息通知</h2><h3 id="任务队列"><a href="#任务队列" class="headerlink" title="任务队列"></a>任务队列</h3><p>两类实体：生产者和消费者，生产者会将需要处理的任务放入任务队列中，而消费者不断地从任务队列中读入任务信息并执行。使用任务队列可以实现松耦合，使得生产者和消费者都可伸缩，并且在访问量急剧增加的情况下可以根据系统资源情况削峰，降低负载。</p>
<h3 id="使用redis实现任务队列"><a href="#使用redis实现任务队列" class="headerlink" title="使用redis实现任务队列"></a>使用redis实现任务队列</h3><p>最基本使用redis的列表类型，生产者使用LPUSH加入任务，消费者使用RPOP取出任务并执行（while不断循环，可设置间隔时间）。</p>
<p>上面的一个确定是消费者需要不断调用RPOP查看是否存在新任务，带了额外的负载压力。我们可以通过BRPOP实现一旦有新任务就通知消费者，消费者在调用BRPOP之后，如果没有任务则会阻塞，知道有新任务加入。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">BRPOP queue 0 <span class="comment"># 0表示一直阻塞，其他表示只会阻塞一定时间</span></div></pre></td></tr></table></figure>
<h3 id="优先级队列"><a href="#优先级队列" class="headerlink" title="优先级队列"></a>优先级队列</h3><p>有时一个消费者可能能处理相同类型的不同任务，但优先级不同。如VIP客户的订单处理和普通客户的订单处理，可以将不同类型的客户的订单存在不同队列中。BRPOP命令可以同时接收多个键，并处理第一个存在任务的队列的任务。</p>
<h3 id="『发布-订阅』模式"><a href="#『发布-订阅』模式" class="headerlink" title="『发布/订阅』模式"></a>『发布/订阅』模式</h3><p>除了任务队列以外，redis还提供了一组命令可以让开发者实现”发布/订阅”模式。”发布/订阅”模式同样可以实现进程间的消息传递：订阅者可以订阅一个或若干个频道(channel)，而发布者可以向指定频道发送消息，所有订阅此频道都会收到该消息。</p>
<p>发布者发布消息:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PUBLIC channel.1 hi</div></pre></td></tr></table></figure>
<p>订阅频道的命令是SUBSCRIBE，可以同时订阅多个频道。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SUBSCRIBE channel.1</div></pre></td></tr></table></figure>
<p>进入订阅状态后客户端可能会收到三种类型的回复。每种类型的回复都包含三个值。第一个值是消息的类型，根据消息类型的不同，第二、第三个值的含义也不同。</p>
<p>三种类型：</p>
<ul>
<li>第一个值为”subsribe”。表示订阅成功的反馈信息，第二个值是订阅成功的频道名称，第三个值是当前客户端订阅的频道数量。</li>
<li>第一个值为”message”。一般这种类型是我们关心的，表示接受到的消息。第二个值表示频道名称，第三个值表示消息的内容。</li>
<li>unsubscribe，表示成功取消订阅频道。</li>
</ul>
<p>使用UNSUBSCRIBE命令可以取消订阅指定的频道，如果不指定参数则会取消所有订阅频道。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UNSUBSCRIBE channel1 channel2 ...</div></pre></td></tr></table></figure>
<h3 id="按照规则订阅"><a href="#按照规则订阅" class="headerlink" title="按照规则订阅"></a>按照规则订阅</h3><p>PSUBSCRIBE支持通配符匹配:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">PSUBSCRIBE channel.?*</div><div class="line"></div><div class="line">1) pmessage</div><div class="line">2) channnel.?*</div><div class="line">3) channel.1</div><div class="line">4) <span class="string">"hi!"</span></div></pre></td></tr></table></figure>
<p>PUNSUBSCRIBE可以退订指定的规则。</p>
<h2 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/04/Leetcode_Longest Valid Parentheses/" itemprop="url">
                  Longest Valid Parentheses
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-10-04T00:00:00+09:00" content="2015-10-04">
              2015-10-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/04/Leetcode_Longest Valid Parentheses/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/04/Leetcode_Longest Valid Parentheses/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Longest-Valid-Parentheses"><a href="#Longest-Valid-Parentheses" class="headerlink" title="Longest Valid Parentheses"></a><a href="https://leetcode.com/problems/longest-valid-parentheses/" target="_blank" rel="external">Longest Valid Parentheses</a></h1><blockquote>
<p>Given a string containing just the characters <code>&#39;(&#39;</code> and <code>&#39;)&#39;</code>, find the length of the longest valid (well-formed) parentheses substring.</p>
<p>For <code>&quot;(()&quot;</code>, the longest valid parentheses substring is <code>&quot;()&quot;</code>, which has length = 2.</p>
<p>Another example is <code>&quot;)()())&quot;</code>, where the longest valid parentheses substring is <code>&quot;()()&quot;</code>, which has <code>length = 4</code>.</p>
</blockquote>
<h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><p>贪心策略，使用栈记录前面的字符以及在字符串中的位置，每次向后扫描，满足Parentheses则弹出栈中的对应长度，并根据当前匹配Parentheses长度判断是否更新max_length.</p>
<p>具体逻辑参考代码。</p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(s==<span class="keyword">null</span> || s.length()==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        Stack&lt;Pair&gt; stack = <span class="keyword">new</span> Stack&lt;Pair&gt;();</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</div><div class="line">        <span class="keyword">char</span> [] cArray = s.toCharArray();</div><div class="line">        </div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;cArray.length; i++) &#123;</div><div class="line">            <span class="keyword">char</span> c = cArray[i];</div><div class="line">            </div><div class="line">            <span class="keyword">if</span>(c==<span class="string">'('</span>) stack.push(<span class="keyword">new</span> Pair(c, i));</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">')'</span>) &#123;</div><div class="line">                <span class="keyword">if</span>(!stack.isEmpty() &amp;&amp; stack.peek().c==<span class="string">'('</span>) &#123;</div><div class="line">                    stack.pop();</div><div class="line">                    <span class="keyword">int</span> length = stack.isEmpty() ? i+<span class="number">1</span> : i - stack.peek().pos;</div><div class="line">                    <span class="keyword">if</span>(length&gt;max) max = length;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                	stack.push(<span class="keyword">new</span> Pair(c, i));</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> max;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>&#123;</div><div class="line">        <span class="keyword">char</span> c;</div><div class="line">        <span class="keyword">int</span> pos;</div><div class="line">        Pair(<span class="keyword">char</span> c, <span class="keyword">int</span> pos) &#123;</div><div class="line">            <span class="keyword">this</span>.c = c;</div><div class="line">            <span class="keyword">this</span>.pos = pos;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/66/">66</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/plusaber.jpg"
               alt="Plusaber" />
          <p class="site-author-name" itemprop="name">Plusaber</p>
          <p class="site-description motion-element" itemprop="description">Plusaber's Blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">327</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">分類</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">52</span>
                <span class="site-state-item-name">標籤</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.kaggle.com" title="Kaggle" target="_blank">Kaggle</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.algolia.com" title="Algolia" target="_blank">Algolia</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://jp.linkedin.com/in/zebangchen" title="LinkedIn" target="_blank">LinkedIn</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://portal.qiniu.com" title="Qiniu" target="_blank">Qiniu</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Plusaber</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'plusaber';
      var disqus_identifier = 'page/10/index.html';
      var disqus_title = "";
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  




  
  

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

  


</body>
</html>
