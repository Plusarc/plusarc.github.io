<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">










  <meta name="google-site-verification" content="google88d81a02a91db82f">















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico?v=7.1.1">


  <link rel="mask-icon" href="/favicon.ico?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: 'LP2H1MWXO2',
      apiKey: '69bf93a909694ef7f679098292b442ca',
      indexName: 'Plusaber',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Plusaber&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Plusaber&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Plusaber&#39;s Blog">
<meta property="og:description" content="Plusaber&apos;s Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Plusaber&#39;s Blog">
<meta name="twitter:description" content="Plusaber&apos;s Blog">





  
  
  <link rel="canonical" href="http://yoursite.com/page/4/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Plusaber's Blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Plusaber's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/11/05/System Design_大型网站架构发展c1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Plusaber">
      <meta itemprop="description" content="Plusaber's Blog">
      <meta itemprop="image" content="/images/plusaber.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Plusaber's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/11/05/System Design_大型网站架构发展c1/" class="post-title-link" itemprop="url">System Design_大型网站架构发展</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-11-05 00:00:00" itemprop="dateCreated datePublished" datetime="2015-11-05T00:00:00+09:00">2015-11-05</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/System-design/" itemprop="url" rel="index"><span itemprop="name">System design</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2015/11/05/System Design_大型网站架构发展c1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/11/05/System Design_大型网站架构发展c1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="大型网站架构发展"><a href="#大型网站架构发展" class="headerlink" title="大型网站架构发展"></a>大型网站架构发展</h1><p>大型网站的技术挑战主要来自于庞大的用户，高并发的访问和海量的数据，任何简单的业务一旦需要处理以P计的数据和数亿的用户，就会变得很棘手，这也是大型网站架构需要解决的问题。</p>
<h2 id="初始阶段的网站架构"><a href="#初始阶段的网站架构" class="headerlink" title="初始阶段的网站架构"></a>初始阶段的网站架构</h2><p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_1.png" alt="System_design_c1_1"></p>
<p>由于用户量并不大，可以直接将应用程序、数据库、文件等所有资源放在一台服务器上。</p>
<h2 id="应用服务和数据服务分离"><a href="#应用服务和数据服务分离" class="headerlink" title="应用服务和数据服务分离"></a>应用服务和数据服务分离</h2><p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_2.png" alt="System_design_c1_"></p>
<p>需要将应用和数据分离，应用服务器需要处理大量的业务逻辑，需要强大的计算能力，数据库需要快速磁盘检索和数据缓存，所以需要更快的硬盘和更大的内存，文件服务器需要存储大量文件以及文件检索，需要更大的硬盘和内存。这样也方便扩展增加服务器。</p>
<h2 id="使用缓存改善网站性能"><a href="#使用缓存改善网站性能" class="headerlink" title="使用缓存改善网站性能"></a>使用缓存改善网站性能</h2><p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_3.png" alt="System_design_c1_3"></p>
<p>80%的业务集中在20%的数据上，如果将热门的数据缓存在内存中，可以很大的改善网站的相应速度。缓存可以分为两种，本地缓存和专门的分布式缓存服务器，考虑到扩展性，一般使用远程分布式缓存，以集群的方式部署大内存的服务器作为专门的缓存服务器。</p>
<h2 id="使用应用服务器集群改善网站的并发处理能力。"><a href="#使用应用服务器集群改善网站的并发处理能力。" class="headerlink" title="使用应用服务器集群改善网站的并发处理能力。"></a>使用应用服务器集群改善网站的并发处理能力。</h2><p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_4.png" alt></p>
<p>使用集群是完整解决高并发、海量数据的常用手段，也就是横向扩展(通过增加机器的方式扩展，与之相对的是纵向扩展，也就是通过增强一台机器的性能进行扩展)。对于大型网站而言，不管多强大的服务器，都无法满足持续增长的业务需求，这种情况下，更恰当的做法是增加一台服务器分担原有服务器的压力。</p>
<p>通过这种方式可以持续增加服务器不断改善系统性能，从而实现系统的可伸缩性。应用服务器实现集群也是网站可伸缩性集群架构设计中较简单成熟的一种。</p>
<h2 id="数据库读写分离"><a href="#数据库读写分离" class="headerlink" title="数据库读写分离"></a>数据库读写分离</h2><p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_5.png" alt></p>
<p>网站使用缓存后，可以很大程度减轻数据库的压力，但随着用户的进一步增加，数据库仍会因为负载压力过高成为网站的瓶颈，需要数据库读写分离来减轻负载。</p>
<p>应用服务其在写数据时，访问主数据库，主数据库通过主从复制将数据同步到从数据库，这样当应用服务器读数据的时候，就可以通过从数据库获得数据，</p>
<h2 id="使用反向代理和CDN加速网站响应"><a href="#使用反向代理和CDN加速网站响应" class="headerlink" title="使用反向代理和CDN加速网站响应"></a>使用反向代理和CDN加速网站响应</h2><p>CDN和反向代理的基本原理都是缓存，区别在于CDB部署在网络提供商的机房，反向代理则部署在网站的中心机房，当用户到达中心机房后，首先访问反向代理服务器，如果反向代理服务器中缓存着用户请求的资源，就将其直接诶返回给用户。</p>
<p>一方面可以加快访问速度，也可以减轻后端服务器的压力。</p>
<p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_6.png" alt></p>
<h2 id="使用分布式文件系统和分布式数据库系统"><a href="#使用分布式文件系统和分布式数据库系统" class="headerlink" title="使用分布式文件系统和分布式数据库系统"></a>使用分布式文件系统和分布式数据库系统</h2><p>分布式数据库系统是网站数据库拆分的最后手段，只有在单表数据规模¥非常大是才使用。一般网站更常用的数据库拆分手段是<strong>业务分库</strong>，将不同业务的数据库部署到不同的数据库服务器上。</p>
<p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_7.png" alt></p>
<h2 id="使用NoSQL和搜索引擎"><a href="#使用NoSQL和搜索引擎" class="headerlink" title="使用NoSQL和搜索引擎"></a>使用NoSQL和搜索引擎</h2><p>随着网站业务越累越复杂，对数据存储和检索的需求也越来越复杂，网站需要使用一些非关系数据库技术如NoSQL和非数据库查询技术如搜索引擎。</p>
<p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_8.png" alt></p>
<p>NoSQL和搜索引擎都对可伸缩的分布式特性具有很好的支持。应用服务器则通过一个统一的数据访问模块访问各种数据，减轻应用程序管理多数据源的问题。</p>
<h2 id="业务拆分"><a href="#业务拆分" class="headerlink" title="业务拆分"></a>业务拆分</h2><p>大型网站为了应对日益复杂的业务场景，通过分而治之的手段将整个网站业务分成不同的产品线，如首页，支付，订单，卖家，买家等，分到不同的业务团队负责。</p>
<p>具体到技术上，也会根据产品线划分，将一个网站拆分成许多不同的应用，每个应用独立部署，应用之间可以通过超链接建立关系，也可以通过消息队列进行数据分发，最常用的还是通过访问同一个存储系统来构成一个关联的完整系统。</p>
<p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_9.png" alt></p>
<h2 id="分布式服务"><a href="#分布式服务" class="headerlink" title="分布式服务"></a>分布式服务</h2><p>随着业务拆分越累越小，存储系统越来越大，应用系统的整体复杂度呈指数增加，部署维护困难。由于所有的应用要和所有数据库系统连接，这些连接是服务器规模的平方，会导致数据库资源不够。</p>
<p>由于很多子应用系统都需要进行很多相同的业务操作，如用户管理，商品管理等，可以将这些公用的服务提取出来，独立部署，有这些可复用的业务连接数据库，并对外提供公共服务。应用系统只需要通过分布式服务调用公共业务服务完成具体业务操作。</p>
<p><img src="https://plusaberblog.s3-ap-northeast-1.amazonaws.com/image/System_design_c1_10.png" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/10/16/Python_MongoDB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Plusaber">
      <meta itemprop="description" content="Plusaber's Blog">
      <meta itemprop="image" content="/images/plusaber.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Plusaber's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/10/16/Python_MongoDB/" class="post-title-link" itemprop="url">Python_MongoDB</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-10-16 00:00:00" itemprop="dateCreated datePublished" datetime="2015-10-16T00:00:00+09:00">2015-10-16</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2015/10/16/Python_MongoDB/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/16/Python_MongoDB/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a><a href="https://docs.mongodb.org/getting-started/python/client/" target="_blank" rel="noopener">基本操作</a></h1><p>1.Install PyMongo(MongoDB的python driver)<br><code>pip install pymongo</code></p>
<p>2.Import pymongo</p>
<p><code>from pymongo import MongoClient</code></p>
<p>3.Create a connection</p>
<p><code>client = MongoClient()</code><br>如果没有具体参数配置，则会默认连接到本地端口27017启动的mongodb实例，也就是mongodb启动的默认服务端口。</p>
<p><code>client = MongoClient(&quot;mongodb://mongodb0.example.net:27019&quot;)</code></p>
<p>4.Access Database Objects<br>取得数据库实例，数据库也就是多个mongodb集合(collection)的组合。可以直接指定不存在数据库名然后插入数据，就相当于直接创建了该数据库以及相应集合。</p>
<p><code>db = client.noexist</code><br><code>db.blog.insert({&quot;title&quot;: &quot;this is the first blog&quot;})</code></p>
<p>也可以通过字典形式获得¥数据库实例：<br><code>db = client[&#39;primer&#39;]</code></p>
<p>5.Access Collection Objects</p>
<p>Collection(集合)也就相当于传统数据库的表，存放无确定模式的一组文档(document)，文档就相当于传统数据库的行，但是没有确定的模式，可以缺省键，也可以随时新增键。</p>
<p><code>table = db.blog</code><br><code>table = db[&#39;blog&#39;]</code></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/10/11/Python_virtualenv沙箱/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Plusaber">
      <meta itemprop="description" content="Plusaber's Blog">
      <meta itemprop="image" content="/images/plusaber.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Plusaber's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/10/11/Python_virtualenv沙箱/" class="post-title-link" itemprop="url">Python_virtualenv沙箱</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-10-11 00:00:00" itemprop="dateCreated datePublished" datetime="2015-10-11T00:00:00+09:00">2015-10-11</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2015/10/11/Python_virtualenv沙箱/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/11/Python_virtualenv沙箱/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近开发需要使用到python的沙箱环境，以隔离不同程序的开发，这里记录一下python沙箱virtualenv的了解，参考<a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432712108300322c61f256c74803b43bfd65c6f8d0d0000" target="_blank" rel="noopener">virtualenv</a>，官网<a href="https://dh-virtualenv.readthedocs.org/en/0.11/" target="_blank" rel="noopener">virtualenv-documentation</a>.</p>
<p>在同时开发多个应用程序时，可能各个程序所需要的模块版本不同，如A程序需要jinjia 2.6, B程序需要jinja 2.7。默认情况所有通过pip安装的第三方包都会被放到python的site-packages目录下，则会造成冲突。</p>
<p>可以通过下面命令安装virtualenv：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install virtualen</span><br></pre></td></tr></table></figure>
<p>通过virtualenv模块我们可以轻松为每个应用程序设置独立的python运行环境。假设已经切换到A项目目录下，可以通过以下命令建立新的运行环境：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualenv --no-site-packages env</span><br></pre></td></tr></table></figure>
<p><code>--no-site-packages</code>参数指不引入任何默认环境已经引入的库，还可以通过<code>--python</code>设置所需要的python版本环境。</p>
<p>上面命令会在当前目录建立一个<code>env</code>文件夹，记录了环境的设置和第三方库。可以通过执行下面命令进入该环境：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> venv/bin/activate</span><br></pre></td></tr></table></figure>
<p>之后正常安装需要的第三方包，都只会影响当前这个<code>env</code>环境，不会影响系统python环境。</p>
<p>如果需要退出<code>env</code>环境，可以使用：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure>
<p>virtualenv的原理是把系统Python复制一份到virtualenv的环境，用命令<code>source venv/bin/activate</code>进入一个virtualenv环境时，virtualenv会修改相关环境变量，让命令<code>python</code>和<code>pip</code>均指向当前的virtualenv环境。参考<a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432712108300322c61f256c74803b43bfd65c6f8d0d0000" target="_blank" rel="noopener">virtualenv</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/10/08/Research_DBpedia Spotlight Introduction and Manual/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Plusaber">
      <meta itemprop="description" content="Plusaber's Blog">
      <meta itemprop="image" content="/images/plusaber.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Plusaber's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/10/08/Research_DBpedia Spotlight Introduction and Manual/" class="post-title-link" itemprop="url">DBpedia Spotlight</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-10-08 00:00:00" itemprop="dateCreated datePublished" datetime="2015-10-08T00:00:00+09:00">2015-10-08</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/research/" itemprop="url" rel="index"><span itemprop="name">research</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2015/10/08/Research_DBpedia Spotlight Introduction and Manual/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/08/Research_DBpedia Spotlight Introduction and Manual/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="DBpedia-Spotlight"><a href="#DBpedia-Spotlight" class="headerlink" title="DBpedia Spotlight"></a>DBpedia Spotlight</h1><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>DBpedia Spotlight is a tool for automatically annotating mentions of DBpedia resources in text, providing a solution for linking unstructured information sources to the Linked Open Data cloud through DBpedia. DBpedia Spotlight recognizes that names of concepts or entities have been mentioned (e.g. “Michael Jordan”), and subsequently matches these names to unique identifiers (e.g. dbpedia:Michael_I._Jordan, the machine learning professor or dbpedia:Michael_Jordan the basketball player). It can also be used for building your solution for Named Entity Recognition, Keyphrase Extraction, Tagging, etc. amongst other information extraction tasks.</p>
<p>Text annotation has the potential of enhancing a wide range of applications, including search, faceted browsing and navigation. By connecting text documents with DBpedia, our system enables a range of interesting use cases. For instance, the ontology can be used as background knowledge to display complementary information on web pages or to enhance information retrieval tasks. Moreover, faceted browsing over documents and customization of web feeds based on semantics become feasible. Finally, by following links from DBpedia into other data sources, the Linked Open Data cloud is pulled closer to the Web of Documents.</p>
<p>Take a look at our Known Uses page for other examples of how DBpedia Spotlight can be used. If you use DBpedia Spotlight in your project, please add a link to <a href="http://spotlight.dbpedia.org" target="_blank" rel="noopener">http://spotlight.dbpedia.org</a>. If you use it in a paper, please use the citation available here.</p>
<p>You can try out DBpedia Spotlight through our Web Application or Web Service endpoints. The Web Application is a user interface that allows you to enter text in a form and generates an HTML annotated version of the text with links to DBpedia. The Web Service endpoints provide programmatic access to the demo, allowing you to retrieve data also in XML or JSON.</p>
<p><a href="http://dbpedia-spotlight.github.io/demo/" target="_blank" rel="noopener">Demo web application</a>.</p>
<h2 id="Glossary"><a href="#Glossary" class="headerlink" title="Glossary"></a>Glossary</h2><ul>
<li><p><strong>Context</strong>: the context refers to the “the parts of something written or spoken that immediately precede and follow a word or passage and clarify its meaning.” </p>
</li>
<li><p><strong>OntologyClass</strong>: an ontology class represents a set of resources sharing similar characteristics. Resources can be of several types: Person, Organisation, Location, FloweringPlant, etc. All of these classes are organized in a domain model (i.e. schema, ontology). The “type” or the “ontology class” of a resource comes from this ontology.</p>
</li>
<li><p><strong>Phrase Recognition</strong>: See Spotting.</p>
</li>
<li><p><strong>Resource</strong>: a resource is any entity or concept in our target knowledge base (e.g. DBpedia). We take this name from RDF (Resource Description Framework), as a generic name for things, concepts, ideas “that can be identified on the Web, even when they cannot be directly retrieved on the Web.”</p>
</li>
<li><p><strong>Spotting</strong>: We call Spotting or Phrase Recognition the task of selecting, from some textual document given as input, phrases that should be annotated by the system. This is closely related to Keyphrase Extraction and Named Entity Recognition, for instance. In Keyphrase Extraction, the system tries to guess the “important” phrases, according to some definition of importance. Meanwhile, in Named Entity Recognition, the system focuses on specific entity types (commonly Person, Location and Organization), and the notion of importance is usually irrelevant. We describe some of these and several other strategies for phrase recognition below.</p>
</li>
<li><p><strong>SurfaceForm</strong>: a surface form is the phrase used to refer to a resource in text. For example: “Barack Obama”, “President Obama” and “Obama” are all surface forms for the resource <code>dbpedia:Obama</code>.</p>
</li>
<li><p><strong>Token</strong>: each individual element extracted after tokenizing the text more. Tokens are the individual words in the context, or slightly modified versions of these words (e.g. running -&gt; run)</p>
</li>
<li><p><strong>Topic</strong>: a topic is a broad categorization of knowledge into areas of interest. For example, text can belong to Business, Politics, Sports or Arts topics.</p>
</li>
</ul>
<h2 id="User’s-manual"><a href="#User’s-manual" class="headerlink" title="User’s manual"></a>User’s manual</h2><p><strong>DBpedia Spotlight</strong> is a tool for annotating mentions of DBpedia concepts in plain text.</p>
<p>We offer three basic functions: Annotate, Disambiguate and Candidates (Best K). They can be accessed from a Scala/Java API, REST Web Service and from a user interface on the Web (HTML/Javascript). For the Scala/Java API, there are a number of configuration parameters that can be used to instruct the annotation and disambiguation functions. The classes DefaultAnnotator, DefaultDisambiguator and DefaultParagraphDisambiguator offer the configuration that we found to provide the best results. The configuration interface offers ways to control the quality of the output of the two above tasks.</p>
<h3 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h3><p>The DBpedia Spotlight Architecture is composed by the following modules:</p>
<ul>
<li><strong>Web application</strong>, a demonstration client (HTML/Javascript interface) that allows users to enter/paste text into a Web browser and visualize the resulting annotated text.</li>
<li><strong>Web Service</strong>, a RESTful/SOAP? Web API that exposes the functionality of annotating and/or disambiguating entities in text.</li>
<li><strong>Annotation Java/Scala API</strong>, exposing the underlying logic that performs the annotation/disambiguation.</li>
<li><strong>Indexing Java/Scala API</strong>, executing the data processing necessary to enable the annotation/disambiguation algorithms used.</li>
<li><strong>Evaluation module</strong>, where we test disambiguators, log results and use those to train our system to perform better.</li>
</ul>
<p><strong>External dependencies</strong>:</p>
<ul>
<li>DBpedia Extraction Framework, (only for the index module) extracting the necessary data from the Wikipedia dumps.</li>
<li>Lucene 2.9.3, providing the low level indexing framework used by DBpedia Spotlight.</li>
<li>LingPipe 4.0.0, providing the string matching implementation used for the Spotter module.</li>
</ul>
<h3 id="System-Requirements"><a href="#System-Requirements" class="headerlink" title="System Requirements"></a>System Requirements</h3><ul>
<li>Java 1.6+</li>
<li>Scala 2.9+</li>
<li>Spotlight JAR</li>
<li>Spotlight Library JARs</li>
<li>Lucene disambiguation index</li>
<li>Spotter dictionary</li>
<li>large RAM to set the heap size big enough for the Spotter (approx. 8G)</li>
<li>Maven 3 for the automagic installation of dependencies.</li>
<li><strong>Indexing Java/Scala API</strong>, executing the data processing necessary to enable the annotation/disambiguation algorithms used.</li>
</ul>
<h3 id="Programmatic-usage"><a href="#Programmatic-usage" class="headerlink" title="Programmatic usage"></a>Programmatic usage</h3><p>If you want to use DBpedia Spotlight in your Java/Scala code, take a look at core/SpotlightFactory to see how you can create your objects, and then look at rest/Candidates.java to see how you can wire them together.</p>
<h3 id="Online-Usage"><a href="#Online-Usage" class="headerlink" title="Online Usage"></a>Online Usage</h3><p>Refer to <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/User&#39;s-manual" target="_blank" rel="noopener">User’s manual</a>。</p>
<h4 id="Content-Negotiation"><a href="#Content-Negotiation" class="headerlink" title="Content Negotiation"></a>Content Negotiation</h4><p>You can request different types of output by setting the Accept request header. For example, in order to request JSON output, you can add Accept:application/json to the request headers.</p>
<p>One example using cURL:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl &quot;http://spotlight.dbpedia.org/rest/annotate?text=President%20Michelle%20Obama%20called%20Thursday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20&quot;\</span><br><span class="line"> -H &quot;Accept:application/json&quot;</span><br></pre></td></tr></table></figure>
<p>The content types we currently support are:</p>
<ul>
<li>text/html</li>
<li>application/xhtml+xml</li>
<li>text/xml</li>
<li>application/json</li>
</ul>
<p>The <code>application/xhtml+xml</code> comes with embedded RDFa that you can give to the RDFa Distiller and get RDF triples in Turtle, RDF+XML, etc. as output.</p>
<p>If your input text is long, you may prefer using POST instead of GET.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -i -X POST \</span><br><span class="line">    -H &quot;Accept:application/json&quot; \</span><br><span class="line">    -H &quot;content-type:application/x-www-form-urlencoded&quot; \</span><br><span class="line">    -d &quot;disambiguator=Document&amp;confidence=-1&amp;support=-1&amp;text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package&quot; \</span><br><span class="line">       http://spotlight.dbpedia.org/rest/annotate/</span><br></pre></td></tr></table></figure>
<p>Please note that you must use content-type application/x-www-form-urlencoded for POST requests.</p>
<p>The following are 4 examples, each consists of a query url and the result.</p>
<h5 id="Example-1-without-type-restriction"><a href="#Example-1-without-type-restriction" class="headerlink" title="Example 1: without type restriction"></a>Example 1: without type restriction</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://spotlight.dbpedia.org/rest/annotate?text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20</span><br></pre></td></tr></table></figure>
<p>returns the XML</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;Annotation text=&quot;President Obama called Wednesday on Congress to extend a tax break</span><br><span class="line">for students included in last year&apos;s economic stimulus package, arguing that the policy</span><br><span class="line">provides more generous assistance.&quot;</span><br><span class="line">confidence=&quot;0.2&quot; support=&quot;20&quot;&gt;</span><br><span class="line">  &lt;Resources&gt;</span><br><span class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Barack_Obama&quot;</span><br><span class="line">      support=&quot;5761&quot; types=&quot;Person,Politician,President&quot; surfaceForm=&quot;President Obama&quot; offset=&quot;0&quot;</span><br><span class="line">      similarityScore=&quot;0.31504717469215393&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</span><br><span class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/United_States_Congress&quot;</span><br><span class="line">      support=&quot;8569&quot; types=&quot;Organisation,Legislature&quot; surfaceForm=&quot;Congress&quot; offset=&quot;36&quot; </span><br><span class="line">      similarityScore=&quot;0.2348192036151886&quot; percentageOfSecondRank=&quot;0.8635579006818564&quot;/&gt;</span><br><span class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Tax_break&quot;</span><br><span class="line">      support=&quot;32&quot; types=&quot;&quot; surfaceForm=&quot;tax break&quot; offset=&quot;57&quot;</span><br><span class="line">      similarityScore=&quot;0.35041093826293945&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</span><br><span class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Student&quot;</span><br><span class="line">      support=&quot;1701&quot; types=&quot;&quot; surfaceForm=&quot;students&quot; offset=&quot;71&quot;</span><br><span class="line">      similarityScore=&quot;0.32534149289131165&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</span><br><span class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Policy&quot;</span><br><span class="line">      support=&quot;557&quot; types=&quot;&quot; surfaceForm=&quot;policy&quot; offset=&quot;148&quot;</span><br><span class="line">      similarityScore=&quot;0.3228176236152649&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</span><br><span class="line">  &lt;/Resources&gt;</span><br><span class="line">&lt;/Annotation&gt;</span><br></pre></td></tr></table></figure>
<h5 id="Example-2-with-type-restriction"><a href="#Example-2-with-type-restriction" class="headerlink" title="Example 2: with type restriction"></a>Example 2: with type restriction</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://spotlight.dbpedia.org/rest/annotate?text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20&amp;types=Person,Organisation</span><br></pre></td></tr></table></figure>
<p>returns the XML</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Annotation text=&quot;President Obama called Wednesday on Congress to extend a tax break</span><br><span class="line">for students included in last year&apos;s economic stimulus package, arguing that the policy</span><br><span class="line">provides more generous assistance.&quot;</span><br><span class="line">confidence=&quot;0.2&quot; support=&quot;20&quot; types=&quot;Person,Organisation&quot;&gt;</span><br><span class="line">  &lt;Resources&gt;</span><br><span class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Barack_Obama&quot;</span><br><span class="line">      support=&quot;5761&quot; types=&quot;Person,Politician,President&quot; surfaceForm=&quot;President Obama&quot; offset=&quot;0&quot; </span><br><span class="line">      similarityScore=&quot;0.31504717469215393&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt;</span><br><span class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/United_States_Congress&quot;</span><br><span class="line">      support=&quot;8569&quot; types=&quot;Organisation,Legislature&quot; surfaceForm=&quot;Congress&quot; offset=&quot;36&quot; </span><br><span class="line">      similarityScore=&quot;0.2348192036151886&quot; percentageOfSecondRank=&quot;0.8635579006818564&quot;/&gt;</span><br><span class="line">  &lt;/Resources&gt;</span><br><span class="line">&lt;/Annotation&gt;</span><br></pre></td></tr></table></figure>
<h5 id="Example-3-with-SPARQL-restriction"><a href="#Example-3-with-SPARQL-restriction" class="headerlink" title="Example 3: with SPARQL restriction"></a>Example 3: with SPARQL restriction</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://spotlight.dbpedia.org/rest/annotate?text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20&amp;sparql=SELECT+DISTINCT+%3Fx%0D%0AWHERE+%7B%0D%0A%3Fx+a+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FOfficeHolder%3E+.%0D%0A%3Fx+%3Frelated+%3Chttp%3A%2F%2Fdbpedia.org%2Fresource%2FChicago%3E+.%0D%0A%7D</span><br></pre></td></tr></table></figure>
<p>returns the XML</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Annotation text=&quot;President Obama called Wednesday on Congress to extend a tax break</span><br><span class="line">for students included in last year&apos;s economic stimulus package, arguing that the policy</span><br><span class="line">provides more generous assistance.&quot;</span><br><span class="line">confidence=&quot;0.2&quot; support=&quot;20&quot; </span><br><span class="line">sparql=&quot;SELECT DISTINCT ?x WHERE &#123; ?x a &lt;http://dbpedia.org/ontology/OfficeHolder&gt;; . </span><br><span class="line">?x ?related &lt;http://dbpedia.org/resource/Chicago&gt;;  &#125;&quot; </span><br><span class="line">policy=&quot;whitelist&quot;&gt; </span><br><span class="line">  &lt;Resources&gt; </span><br><span class="line">    &lt;Resource URI=&quot;http://dbpedia.org/resource/Barack_Obama&quot; </span><br><span class="line">      support=&quot;5761&quot; types=&quot;Person,Politician,President&quot; surfaceForm=&quot;President Obama&quot; offset=&quot;0&quot; </span><br><span class="line">      similarityScore=&quot;0.2730408310890198&quot; percentageOfSecondRank=&quot;-1.0&quot;/&gt; </span><br><span class="line">  &lt;/Resources&gt; </span><br><span class="line">&lt;/Annotation&gt;</span><br></pre></td></tr></table></figure>
<h5 id="Example-4-Candidates-Interface"><a href="#Example-4-Candidates-Interface" class="headerlink" title="Example 4: Candidates Interface"></a>Example 4: Candidates Interface</h5><p>The parameters are the same as in Example 1, but you will send your request to <a href="http://spotlight.dbpedia.org/rest/candidates" target="_blank" rel="noopener">http://spotlight.dbpedia.org/rest/candidates</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://spotlight.dbpedia.org/rest/candidates?text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20</span><br></pre></td></tr></table></figure>
<p>returns XML</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;annotation text=&quot;President Obama on Monday will call for a new minimum tax rate for individuals making more than $1 million a year to ensure that they pay at least the same percentage of their earnings as other taxpayers, according to administration officials. &quot;&gt;</span><br><span class="line">&lt;surfaceForm name=&quot;individuals&quot; offset=&quot;67&quot;&gt;</span><br><span class="line">  &lt;resource label=&quot;Individual&quot; uri=&quot;Individual&quot; contextualScore=&quot;0.26683980226516724&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;312&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.26683980226516724&quot;/&gt;</span><br><span class="line">  &lt;resource label=&quot;The Individuals (New Jersey band)&quot; uri=&quot;The_Individuals_%28New_Jersey_band%29&quot; contextualScore=&quot;0.011762913316488266&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;17&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.011762913316488266&quot;/&gt;</span><br><span class="line">  &lt;resource label=&quot;The Individuals (Chicago band)&quot; uri=&quot;The_Individuals_%28Chicago_band%29&quot; contextualScore=&quot;0.0&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;0&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.0&quot;/&gt;</span><br><span class="line">&lt;/surfaceForm&gt;</span><br><span class="line">&lt;surfaceForm name=&quot;officials&quot; offset=&quot;233&quot;&gt;</span><br><span class="line">  &lt;resource label=&quot;Official&quot; uri=&quot;Official&quot; contextualScore=&quot;0.1324356347322464&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;196&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.1324356347322464&quot;/&gt;</span><br><span class="line">  &lt;resource label=&quot;Rugby league match officials&quot; uri=&quot;Rugby_league_match_officials&quot; contextualScore=&quot;0.04376954212784767&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;9&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.04376954212784767&quot;/&gt;</span><br><span class="line">&lt;/surfaceForm&gt;</span><br><span class="line">&lt;surfaceForm name=&quot;President Obama&quot; offset=&quot;0&quot;&gt;</span><br><span class="line">  &lt;resource label=&quot;Presidency of Barack Obama&quot; uri=&quot;Presidency_of_Barack_Obama&quot; contextualScore=&quot;0.5634340643882751&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;134&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.5634340643882751&quot;/&gt;</span><br><span class="line">&lt;/surfaceForm&gt;</span><br><span class="line">&lt;surfaceForm name=&quot;1 million&quot; offset=&quot;97&quot;&gt;</span><br><span class="line">  &lt;resource label=&quot;Million&quot; uri=&quot;Million&quot; contextualScore=&quot;0.527919590473175&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;492&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.527919590473175&quot;/&gt;</span><br><span class="line">&lt;/surfaceForm&gt;</span><br><span class="line">&lt;surfaceForm name=&quot;percentage&quot; offset=&quot;156&quot;&gt;</span><br><span class="line">  &lt;resource label=&quot;Percentage&quot; uri=&quot;Percentage&quot; contextualScore=&quot;0.6362485885620117&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;165&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.6362485885620117&quot;/&gt;</span><br><span class="line">&lt;/surfaceForm&gt;</span><br><span class="line">&lt;surfaceForm name=&quot;earnings&quot; offset=&quot;176&quot;&gt;</span><br><span class="line">  &lt;resource label=&quot;Income&quot; uri=&quot;Income&quot; contextualScore=&quot;0.5776156187057495&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;648&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.5776156187057495&quot;/&gt;</span><br><span class="line">&lt;/surfaceForm&gt;</span><br><span class="line">&lt;surfaceForm name=&quot;taxpayers&quot; offset=&quot;194&quot;&gt;</span><br><span class="line">  &lt;resource label=&quot;Tax&quot; uri=&quot;Tax&quot; contextualScore=&quot;0.7484055757522583&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;1540&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.7484055757522583&quot;/&gt;</span><br><span class="line">  &lt;resource label=&quot;TaxPayers&amp;apos; Alliance&quot; uri=&quot;TaxPayers%27_Alliance&quot; contextualScore=&quot;0.12765906751155853&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;15&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.12765906751155853&quot;/&gt;</span><br><span class="line">  &lt;resource label=&quot;The Taxpayer (Luxembourg)&quot; uri=&quot;The_Taxpayer_%28Luxembourg%29&quot; contextualScore=&quot;0.024930020794272423&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;3&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.024930020794272423&quot;/&gt;</span><br><span class="line">  &lt;resource label=&quot;The Taxpayers&quot; uri=&quot;The_Taxpayers&quot; contextualScore=&quot;0.0&quot; percentageOfSecondRank=&quot;-1.0&quot; support=&quot;0&quot; priorScore=&quot;0.0&quot; finalScore=&quot;0.0&quot;/&gt;</span><br><span class="line">&lt;/surfaceForm&gt;</span><br><span class="line">&lt;/annotation&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a><a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Installation" target="_blank" rel="noopener">Installation</a></h2><p>Refer to <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Installation" target="_blank" rel="noopener">Installation</a>.</p>
<h3 id="Web-service"><a href="#Web-service" class="headerlink" title="Web service"></a><a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Web-service" target="_blank" rel="noopener">Web service</a></h3><p>This page gives an introduction on how to use the DBpedia Spotlight Web Service. The available service endpoints are listed below and described in more details in the User’s Manual.</p>
<h4 id="Spotting"><a href="#Spotting" class="headerlink" title="Spotting"></a>Spotting</h4><p>Spotting : takes text as input and recognizes entities/concepts to annotate. Several spotting techniques are available, such as dictionary lookup and Named Entity Recognition (NER).</p>
<h4 id="Disambiguate"><a href="#Disambiguate" class="headerlink" title="Disambiguate"></a>Disambiguate</h4><p>Disambiguation: takes spotted text input, where entities/concepts have already been recognized and marked as wiki markup or xml. Chooses an identifier for each recognized entity/concept given the context.</p>
<p>Supported types (POST/GET):XML, JSON, HTML, RDFa, NIF</p>
<h4 id="Annotate"><a href="#Annotate" class="headerlink" title="Annotate"></a>Annotate</h4><p>Annotation: runs spotting and disambiguation. Takes text as input, recognizes entities/concepts to annotate and chooses an identifier for each recognized entity/concept given the context.</p>
<p>Supported types (POST/GET):XML, JSON, HTML, RDFa, NIF</p>
<h4 id="Candidates"><a href="#Candidates" class="headerlink" title="Candidates"></a>Candidates</h4><p>Similar to annotate, but returns a ranked list of candidates instead of deciding on one. These list contains some properties as described below:</p>
<ul>
<li>support: how prominent is this entity, i.e. number of inlinks in Wikipedia;</li>
<li>priorScore: normalized support;<br>contextualScore: score from comparing the context representation of an <em> </em> entity with the text (e.g. cosine similartity with if-icf weights);</li>
<li>percentageOfSecondRank: measure by how much the winning entity has won by takingcontextualScore_2ndRank / contextualScore_1stRank, which means the lower this score, the further the first ranked entity was “in the lead”;</li>
<li>finalScore: combination of all of them;<br>Supported types (POST/GET):XML, JSON</li>
</ul>
<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><h5 id="Example-1-Simple-request"><a href="#Example-1-Simple-request" class="headerlink" title="Example 1: Simple request"></a>Example 1: Simple request</h5><ul>
<li>text= “President Obama called Wednesday on Congress to extend a tax break for students included in last year’s economic stimulus package, arguing that the policy provides more generous assistance.”</li>
<li>confidence = 0.2; support=20</li>
<li>whitelist all types.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">curl http://spotlight.dbpedia.org/rest/annotate \</span><br><span class="line">  --data-urlencode &quot;text=President Obama called Wednesday on Congress to extend a tax break</span><br><span class="line">  for students included in last year&apos;s economic stimulus package, arguing</span><br><span class="line">  that the policy provides more generous assistance.&quot; \</span><br><span class="line">  --data &quot;confidence=0.2&quot; \</span><br><span class="line">  --data &quot;support=20&quot;</span><br></pre></td></tr></table></figure>
<h4 id="Example-2-Using-SPARQL-for-filtering"><a href="#Example-2-Using-SPARQL-for-filtering" class="headerlink" title="Example 2: Using SPARQL for filtering"></a>Example 2: Using SPARQL for filtering</h4><p>This example demonstrates how to keep the annotations constrained to only politicians related to Chicago.</p>
<ul>
<li>text= “President Obama called Wednesday on Congress to extend a tax break for students included in last year’s economic stimulus package, arguing that the policy provides more generous assistance.”</li>
<li>confidence = 0.2; support=20<br>whitelist sparql = SELECT DISTINCT ?politician WHERE { ?politician a <a href="http://dbpedia.org/ontology/officeholder" target="_blank" rel="noopener">http://dbpedia.org/ontology/officeholder</a><a href="/http://dbpedia.org/ontology/officeholder">/http://dbpedia.org/ontology/officeholder</a> . ?politician ?related <a href="http://dbpedia.org/resource/chicago" target="_blank" rel="noopener">http://dbpedia.org/resource/chicago</a><a href="/http://dbpedia.org/resource/chicago">/http://dbpedia.org/resource/chicago</a> }</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl http&amp;amp;&amp;#35;58&amp;#59;//spotlight.dbpedia.org/rest/annotate \</span><br><span class="line">  &amp;amp;&amp;#35;45&amp;#59;&amp;amp;&amp;#35;45&amp;#59;data&amp;amp;&amp;#35;45&amp;#59;urlencode &amp;amp;quot&amp;#59;text&amp;amp;&amp;#35;61&amp;#59;President Obama called Wednesday on Congress to extend a tax break</span><br><span class="line">  for students included in last year&amp;amp;&amp;#35;39&amp;#59;s economic stimulus package, arguing</span><br><span class="line">  that the policy provides more generous assistance.&amp;amp;quot&amp;#59; \</span><br><span class="line">  &amp;amp;&amp;#35;45&amp;#59;&amp;amp;&amp;#35;45&amp;#59;data &amp;amp;quot&amp;#59;confidence&amp;amp;&amp;#35;61&amp;#59;0.2&amp;amp;quot&amp;#59; \</span><br><span class="line">  &amp;amp;&amp;#35;45&amp;#59;&amp;amp;&amp;#35;45&amp;#59;data &amp;amp;quot&amp;#59;support&amp;amp;&amp;#35;61&amp;#59;20&amp;amp;quot&amp;#59; \</span><br><span class="line"> &amp;amp;&amp;#35;45&amp;#59;&amp;amp;&amp;#35;45&amp;#59;data&amp;amp;&amp;#35;45&amp;#59;urlencode &amp;amp;quot&amp;#59;sparql&amp;amp;&amp;#35;61&amp;#59;SELECT DISTINCT ?x WHERE &amp;amp;&amp;#35;123&amp;#59; ?x a &amp;amp;lt&amp;#59;http&amp;amp;&amp;#35;58&amp;#59;//dbpedia.org/ontology/OfficeHolder&amp;amp;gt&amp;#59; . ?x ?related &amp;amp;lt&amp;#59;http&amp;amp;&amp;#35;58&amp;#59;//dbpedia.org/resource/Chicago&amp;amp;gt&amp;#59; . &amp;amp;&amp;#35;125&amp;#59;&amp;amp;quot&amp;#59;</span><br></pre></td></tr></table></figure>
<p><strong>Notice</strong>: Due to system resources restrictions, for this demo we only use the first 2000 results returned for each query (default for the public DBpedia SPARQL endpoint). However you are welcome to download the software+data and install in your server for real world use cases.</p>
<p><strong>Attention</strong>: Make sure to encode your SPARQL query before adding it as the value of the //&amp;sparql// parameter - see <a href="http://download.oracle.com/javase/6/docs/api/java/net/URLEncoder.html" target="_blank" rel="noopener">java.net.URLEncoder.encode()</a>.</p>
<h4 id="Content-Negotiation-1"><a href="#Content-Negotiation-1" class="headerlink" title="Content Negotiation"></a>Content Negotiation</h4><p>You can request different types of output by setting the Accept request header. For example, in order to request JSON output, you can add Accept:application/json to the request headers.</p>
<p>One example using cURL:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl &quot;http://spotlight.dbpedia.org/rest/annotate?text=President%20Michelle%20Obama%20called%20Thursday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package,%20arguing%20that%20the%20policy%20provides%20more%20generous%20assistance.&amp;confidence=0.2&amp;support=20&quot; -H &quot;Accept:application/json&quot;</span><br></pre></td></tr></table></figure>
<p>The content types we currently support are:</p>
<ul>
<li>text/html</li>
<li>application/xhtml+xml</li>
<li>text/xml</li>
<li>application/json</li>
</ul>
<p>The application/xhtml+xml comes with embedded RDFa that you can give to the RDFa Distiller and get RDF triples in Turtle, RDF+XML, etc. as output.<br>If your input text is long, you may prefer using POST instead of GET.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -i -X POST \</span><br><span class="line">   -H &quot;Accept:application/json&quot; \</span><br><span class="line">   -H &quot;content-type:application/x-www-form-urlencoded&quot; \</span><br><span class="line">   -d &quot;disambiguator=Document&amp;confidence=-1&amp;support=-1&amp;text=President%20Obama%20called%20Wednesday%20on%20Congress%20to%20extend%20a%20tax%20break%20for%20students%20included%20in%20last%20year%27s%20economic%20stimulus%20package&quot; \</span><br><span class="line">   http://spotlight.dbpedia.org/dev/rest/annotate/</span><br></pre></td></tr></table></figure>
<p>Please not that you must use content-type application/x-www-form-urlencoded for POST requests.</p>
<h3 id="Run-from-a-JAR"><a href="#Run-from-a-JAR" class="headerlink" title="Run from a JAR"></a>Run from a JAR</h3><p>This page describes how to run DBpedia Spotlight in your own server by using a pre-packaged JAR. We assume that you are running these commands on a bash command line (Linux) and have wget, curl and java installed.</p>
<p>Requirements</p>
<ul>
<li>Java 1.6+</li>
<li>RAM of appropriate size for the spotter lexicon you need</li>
</ul>
<h4 id="Quickstart"><a href="#Quickstart" class="headerlink" title="Quickstart"></a>Quickstart</h4><p>The commands below will help you to obtain a pre-packaged lightweight deployment to get you started.</p>
<h5 id="Lucene"><a href="#Lucene" class="headerlink" title="Lucene:"></a>Lucene:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://spotlight.dbpedia.org/download/release-0.6/dbpedia-spotlight-quickstart-0.6.5.zip</span><br><span class="line">unzip dbpedia-spotlight-quickstart-0.6.5.zip</span><br><span class="line">cd dbpedia-spotlight-quickstart-0.6.5/</span><br><span class="line">./run.sh</span><br></pre></td></tr></table></figure>
<p>Older jars are downloadable from: <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/downloads" target="_blank" rel="noopener">https://github.com/dbpedia-spotlight/dbpedia-spotlight/downloads</a></p>
<h5 id="Statistical"><a href="#Statistical" class="headerlink" title="Statistical:"></a>Statistical:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://spotlight.sztaki.hu/downloads/version-0.1/en.tar.gz</span><br><span class="line">wget http://spotlight.sztaki.hu/downloads/version-0.1/dbpedia-spotlight.jar</span><br><span class="line">tar xvf en.tar.gz </span><br><span class="line">java -jar dbpedia-spotlight.jar /data/spotlight/en/model_en http://localhost:2222/rest</span><br></pre></td></tr></table></figure>
<h4 id="Test-your-installation"><a href="#Test-your-installation" class="headerlink" title="Test your installation"></a>Test your installation</h4><p>In order to test your new installation, run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:2222/rest/annotate \</span><br><span class="line">  -H &quot;Accept: text/xml&quot; \</span><br><span class="line">  --data-urlencode &quot;text=Brazilian state-run giant oil company Petrobras signed a three-year technology and research cooperation agreement with oil service provider Halliburton.&quot; \</span><br><span class="line">  --data &quot;confidence=0&quot; \</span><br><span class="line">  --data &quot;support=0&quot;</span><br></pre></td></tr></table></figure>
<p>Now you can study more about how to call your newly installed <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Web-service" target="_blank" rel="noopener">Web Service</a>, which parameters are accepted, etc. here.</p>
<h4 id="Upgrade-your-models"><a href="#Upgrade-your-models" class="headerlink" title="Upgrade your models"></a>Upgrade your models</h4><h5 id="Lucene-1"><a href="#Lucene-1" class="headerlink" title="Lucene:"></a>Lucene:</h5><p>The files you’ve downloaded above contain only a very small subset of the DBpedia resources. They are used to demonstrate DBpedia Spotlight in a lightweight environment. Please see our <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Downloads" target="_blank" rel="noopener">Downloads</a> for more information on other alternatives that are more useful in real world scenarios. See below one example.</p>
<p>First rename your small model files:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv data/index data/index-small</span><br><span class="line">mv data/spotter.dict data/spotter-small.dict</span><br></pre></td></tr></table></figure>
<p>Now obtain new copies with larger models:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd data</span><br><span class="line">wget http://spotlight.dbpedia.org/download/release-0.5/context-index-compact.tgz</span><br><span class="line">tar zxvf context-index-compact.tgz</span><br><span class="line">mv index-withSF-withTypes-compressed index</span><br><span class="line">wget http://spotlight.dbpedia.org/download/release-0.4/surface_forms-Wikipedia-TitRedDis.uriThresh75.tsv.spotterDictionary.gz</span><br><span class="line">gunzip surface_forms-Wikipedia-TitRedDis.uriThresh75.tsv.spotterDictionary.gz</span><br><span class="line">mv surface_forms-Wikipedia-TitRedDis.uriThresh75.tsv.spotterDictionary spotter.dict</span><br></pre></td></tr></table></figure>
<p>If you are using the largest spotter dict, you may need to increase the java heap space — e.g. -Xmx10G in your command line.</p>
<h5 id="Statistical-1"><a href="#Statistical-1" class="headerlink" title="Statistical:"></a>Statistical:</h5><p>We offer only the complete model with this option. You can download the newest models from <a href="http://spotlight.sztaki.hu/downloads/" target="_blank" rel="noopener">http://spotlight.sztaki.hu/downloads/</a></p>
<h2 id="Two-Backend-version"><a href="#Two-Backend-version" class="headerlink" title="Two Backend version"></a>Two Backend version</h2><h3 id="Statistical-backend"><a href="#Statistical-backend" class="headerlink" title="Statistical backend"></a>Statistical backend</h3><p>Refer to <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Statistical-implementation" target="_blank" rel="noopener">Statistical backend</a>.</p>
<h3 id="Lucene-backend"><a href="#Lucene-backend" class="headerlink" title="Lucene backend"></a>Lucene backend</h3><p>Refer to <a href="https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/IR-based-implementation-(Lucene" target="_blank" rel="noopener">Lucene backend</a>).</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/10/08/Research_检索&聚类评价/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Plusaber">
      <meta itemprop="description" content="Plusaber's Blog">
      <meta itemprop="image" content="/images/plusaber.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Plusaber's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/10/08/Research_检索&聚类评价/" class="post-title-link" itemprop="url">检索&聚类评价</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-10-08 00:00:00" itemprop="dateCreated datePublished" datetime="2015-10-08T00:00:00+09:00">2015-10-08</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/research/" itemprop="url" rel="index"><span itemprop="name">research</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2015/10/08/Research_检索&聚类评价/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/08/Research_检索&聚类评价/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="检索Evaluation"><a href="#检索Evaluation" class="headerlink" title="检索Evaluation"></a>检索Evaluation</h1><h2 id="Evaluation-Criteria-of-Unranked-Retrieval"><a href="#Evaluation-Criteria-of-Unranked-Retrieval" class="headerlink" title="Evaluation Criteria of Unranked Retrieval"></a>Evaluation Criteria of Unranked Retrieval</h2><div class="table-container">
<table>
<thead>
<tr>
<th>-</th>
<th>Retrieved</th>
<th>Not-retrieved</th>
</tr>
</thead>
<tbody>
<tr>
<td>relevante</td>
<td>TP(true positive)</td>
<td>FN(false negative)</td>
</tr>
<tr>
<td>Non-relevant</td>
<td>FP(false positive)</td>
<td>TN(true negative)</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Precision-AND-Recall"><a href="#Precision-AND-Recall" class="headerlink" title="Precision AND Recall"></a><a href="https://en.wikipedia.org/wiki/Precision_and_recall" target="_blank" rel="noopener">Precision AND Recall</a></h3><script type="math/tex; mode=display">
precision = \frac{TP}{TP+FP}</script><script type="math/tex; mode=display">
recall = \frac{TP}{TP+FN}</script><h3 id="Precision-Recall-Curve"><a href="#Precision-Recall-Curve" class="headerlink" title="Precision-Recall Curve"></a>Precision-Recall Curve</h3><p>通常precision和recall是呈一种负相关的关系，recall越高，precision越低。precision-recall curve以recall为横坐标，以precision为纵坐标，表示precision-recall变化关系。</p>
<h3 id="F-Score"><a href="#F-Score" class="headerlink" title="F-Score"></a><a href="https://en.wikipedia.org/wiki/F1_score" target="_blank" rel="noopener">F-Score</a></h3><p>组合precision和recall的评价参数。</p>
<script type="math/tex; mode=display">
F = \frac{1}{\alpha\frac 1P + (1-\alpha)\frac 1R} = \frac{(\beta^{2}+1)PR}{\beta^2P+R}</script><p>通常我们取$\beta=1,2,3..=，1$，也就是$\alpha=0.5$，也就是harmonic mean，也写作$F_1$，当取$\beta=1,2,3..$，也就得到$F_1, F_2, F_3..$：</p>
<script type="math/tex; mode=display">
F_1 = \frac{2}{\frac 1P + \frac 1R}=\frac{2PR}{R+P}</script><h2 id="Precision-for-Rankded-retrieval"><a href="#Precision-for-Rankded-retrieval" class="headerlink" title="Precision for Rankded retrieval"></a>Precision for Rankded retrieval</h2><h3 id="P-k-AND-R-k"><a href="#P-k-AND-R-k" class="headerlink" title="P@k AND R@k"></a>P@k AND R@k</h3><p>用于表示在top k结果中的precision和Recall，如P@10，表示top 10结果的precision。</p>
<h3 id="MRR"><a href="#MRR" class="headerlink" title="MRR"></a>MRR</h3><p>也就是Mean reciprocal rank，reciprocal rank表示对于一个query第一个正确结果排名位置的倒数值，也就是$RR=\frac {1}{rank}$。MRR表示多个query的RR的平均值：</p>
<script type="math/tex; mode=display">
MRR=\frac{1}{|Q|}\sum^{|Q|}_{i=1}\frac {1}{rank_i}</script><p>维基百科给出了一个很好的例子：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>query</th>
<th>results</th>
<th>correct response</th>
<th>rank</th>
<th>reciprocal rank</th>
</tr>
</thead>
<tbody>
<tr>
<td>cat</td>
<td>cattern,cati,cats</td>
<td>cats</td>
<td>3</td>
<td>1/3</td>
</tr>
<tr>
<td>torus</td>
<td>toril,tori,toruses</td>
<td>tori</td>
<td>2</td>
<td>1/2</td>
</tr>
<tr>
<td>virus</td>
<td>viruses,virii,viri</td>
<td>viruses</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<p>$MRR=\frac {(\frac 13 + \frac 12 + 1)}{3}=0.61$</p>
<h3 id="MAP"><a href="#MAP" class="headerlink" title="MAP"></a>MAP</h3><p>Mean average precision，上面的MRR适合只考虑第一个正确结果检索性能使用，如果有多个正确结果且都要考虑，则应该使用MAP。</p>
<p>假设query q有m个correct document(or query suggestion etc.).</p>
<script type="math/tex; mode=display">
AP(q)=\frac 1m \sum^{i=m}_{i=1}P(RankSet_i)</script><p>$RankSet_i$表示document i排序所在的位置及以上的位置所有的document。假设docuement i=3，排在第7的位置，则$RankSet_3$为1-7的documents，$P(RankSet_i)$即是这个set的precision。</p>
<p>MAP为多个query的AP的mean：</p>
<script type="math/tex; mode=display">
MAP=\frac{1}{|Q|}\sum^{|Q|}_{i=1}{AP(i)}</script><h3 id="DCG-and-nDCG"><a href="#DCG-and-nDCG" class="headerlink" title="DCG and nDCG"></a>DCG and nDCG</h3><p>DCG：Discounted cumulative gain<br>nDCG：Normalized Discounted cumulative gain</p>
<p>给每个文档指定一个得分，我们希望的得分越高的文档排在越前面。<br>假设一个排名是: $G=[5,2,3,0,10,3]$</p>
<p>cumulativfe gain可以计算如下：</p>
<script type="math/tex; mode=display">
CG[k]=\sum^{k}_{i=1}G[i]</script><p>加上一个惩罚系数，排名越后惩罚越多：</p>
<script type="math/tex; mode=display">
DCG[k]=\sum^{k}_{i=1}\frac{G[i]}{log_2(1+i)}</script><p>存在理想的排序$G^`=[10,5,3,3,2,0]$，使得DCG的得分最高。</p>
<p>使用这个最高得分normal实际的排序，得到就是nDCG得分。</p>
<script type="math/tex; mode=display">
nDCG[k]=\frac{DCG[k]}{DCG^`[k]}</script><h2 id="Other-Criteria-of-Effective-IR"><a href="#Other-Criteria-of-Effective-IR" class="headerlink" title="Other Criteria of Effective IR"></a>Other Criteria of Effective IR</h2><ul>
<li>diversity</li>
<li>credibility</li>
<li>comprehensibility</li>
</ul>
<h1 id="Clustering-Evaluaition"><a href="#Clustering-Evaluaition" class="headerlink" title="Clustering Evaluaition"></a>Clustering Evaluaition</h1><p>参考<a href="http://nlp.stanford.edu/IR-book/html/htmledition/evaluation-of-clustering-1.html" target="_blank" rel="noopener">Evaluation of clustering</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/plusaber.jpg" alt="Plusaber">
            
              <p class="site-author-name" itemprop="name">Plusaber</p>
              <div class="site-description motion-element" itemprop="description">Plusaber's Blog</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">82</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://jp.linkedin.com/in/zebangchen" title="https://jp.linkedin.com/in/zebangchen" rel="noopener" target="_blank">LinkedIn</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://indeed.com" title="https://indeed.com" rel="noopener" target="_blank">Indeed</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://baito.indeed.com" title="https://baito.indeed.com" rel="noopener" target="_blank">Baito</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.kaggle.com" title="https://www.kaggle.com" rel="noopener" target="_blank">Kaggle</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2014 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Plusaber</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.1"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  
  
  <script id="dsq-count-scr" src="https://plusaber.disqus.com/count.js" async></script>







  




  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
        
      
    
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').not('.gist .highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('Copy');
      }, 300);
    }).append(e);
  })
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

</body>
</html>
